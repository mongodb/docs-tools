!function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),r=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},s=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)};function u(e){return!e.siblings("ul:not(.simple)").length}function c(e){for(var t=[],n=0;n<e.length;n+=1)t.push(e[n]);return t}function d(e){var t=window.docsExcludedNav;if(!t||!t.length)return!1;for(var n=0;n<t.length;n+=1)if(-1!==e[0].href.indexOf(t[n]))return!0;return!1}function p(e,t){try{window.analytics.track(e,t)}catch(t){console.error("Error reporting analytics: "+e,t)}}var h=function(){function e(){t(this,e),this.listeners=[]}return n(e,[{key:"listen",value:function(e){this.listeners.push(e)}},{key:"dispatch",value:function(e){for(var t=0;t<this.listeners.length;t+=1)this.listeners[t](e)}}]),e}(),m="accordion--collapsed";function f(e){e.classList.toggle(m);var t=e.querySelector(".accordion__action");t.innerHTML="Expand"===t.innerHTML?"Collapse":"Expand",p("Accordion Toggled",{title:e.querySelector(".accordion__title").innerText,status:e.classList.contains(m)?"collapsed":"expanded"})}var v=Object.freeze({setup:function(){for(var e=document.getElementsByClassName("accordion"),t=0;t<e.length;t+=1){var n=e[t];n.querySelector(".accordion__button").addEventListener("click",f.bind(this,n))}}});var g=Object.freeze({setup:function(){var e=document.getElementById("showNav");e&&(e.onclick=function(){document.getElementById("sphinxsidebar").style.display="block",document.getElementById("left-column").style.display="flex",document.getElementById("showNav").style.display="none"});var t=document.getElementById("closeNav");t&&(t.onclick=function(){document.getElementById("showNav").style.display="flex",document.getElementById("left-column").style.display="none"})}});function y(e){!function(e){return Boolean(e.getElementsByClassName("linenos").length)}(e)?function(e){return Boolean(e.getElementsByClassName("caption-text").length)}(e)&&function(e){var t=e.getElementsByClassName("button-row")[0],n=e.getElementsByClassName("code-block-caption")[0];console.log("MOVING BELOW CAPTION"),n.parentNode.insertBefore(t,n.nextSibling)}(e):function(e){var t=e.getElementsByClassName("button-row")[0],n=e.getElementsByClassName("highlighttable")[0].childNodes[0],r=document.createElement("tr"),a=document.createElement("td"),o=document.createElement("td");a.className="linenos-button-row-spacer",n.insertBefore(r,n.firstChild),r.appendChild(a),r.appendChild(o),o.appendChild(t)}(e)}var b=Object.freeze({setup:function(){for(var e=document.getElementsByClassName("button-code-block"),t=0,n=e.length;t<n;t++){var r=e[t];Boolean(r.getElementsByClassName("button-row")[0])&&y(r)}}}),w="code-button__tooltip--active",S="code-button__tooltip--inactive";function _(e){return Boolean(e.getElementsByClassName("copyable-code-block")[0])}var C=Object.freeze({setup:function(){for(var t=c(document.getElementsByClassName("button-code-block")).filter(_),n=function(e,n){var r=t[e],a=r.getElementsByClassName("highlight")[0];if(!a)return{v:void 0};var o=r.getElementsByClassName("button-row")[0].getElementsByClassName("code-button--copy")[0];if(!o)return{v:void 0};var i=document.createElement("div");i.innerText="copied",i.classList.add("code-button__tooltip"),i.classList.add(S);var s=-1;o.appendChild(i),o.addEventListener("click",function(){var e=document.createElement("textarea");e.style.position="fixed",document.body.appendChild(e);var t,n,r,o=a.innerText.trim();e.value=o,e.select();try{if(!document.execCommand("copy"))throw new Error("Failed to copy");i.classList.replace(S,w),t=function(){i.classList.replace(w,S)},r=1500,(n=s)>=0&&window.clearTimeout(n),s=window.setTimeout(t,r)}catch(e){console.error(e)}document.body.removeChild(e),p("Codeblock Copied",{code:o})})},r=0,a=t.length;r<a;r++){var o=n(r);if("object"===(void 0===o?"undefined":e(o)))return o.v}}});var E=Object.freeze({setup:function(e){if(void 0===window.history||void 0===document.querySelectorAll||void 0===document.body.classList||void 0===(new XMLHttpRequest).responseURL)return!1;var t=document.querySelector(".sphinxsidebarwrapper"),n=document.querySelector(".body"),r={};function a(){void 0!==r.timeoutID&&window.clearTimeout(r.timeoutID),void 0!==r.xhr&&r.xhr.abort(),r={}}function o(o,i){void 0===o&&console.error("Going to undefined path"),a(),n.classList.add("loading"),r.timeoutID=window.setTimeout(function(){n.classList.remove("loading"),r.timeoutID=-1},1e4);var s=new Date;r.xhr=function(e,t){var n=new XMLHttpRequest;n.onload=function(){n.status>=200&&n.status<400?(t.success(n.responseText,n.responseURL),t.complete()):(t.error(),t.complete())},n.onerror=function(){t.error(),t.complete()},n.open("GET",e,!0);try{n.send()}catch(e){t.error(),t.complete()}}(o,{complete:function(){a()},error:function(e){console.error("Failed to load "+o),window.location=o},success:function(r,a){var o=new Date-s;n.classList.remove("loading"),i&&window.history.pushState({href:a},"",a);var l=document.createElement("html");l.innerHTML=r;var u=l.querySelector("title").textContent,c=l.querySelector(".body"),d=l.querySelector(".sphinxsidebarwrapper");o>62.5&&c.classList.add("loading"),n.parentElement.replaceChild(c,n),n=c,t.parentElement.replaceChild(d,t),t=d,document.title=u,e.update(),window.history.onnavigate&&window.history.onnavigate(),window.setTimeout(function(){n.classList.remove("loading"),i&&window.scroll(0,0)},1)}})}window.history.replaceState({href:window.location.href},document.querySelector("title").textContent,window.location.href);var i=document.querySelectorAll(".sphinxsidebarwrapper > ul a.reference.internal");function s(e){0!==e.button||e.shiftKey||e.altKey||e.metaKey||e.ctrlKey||(e.preventDefault(),o(e.currentTarget.href,!0))}for(var l=0;l<i.length;l+=1){var c=i[l];(u($(c))||d($(c)))&&c.addEventListener("click",s)}return window.onpopstate=function(e){null!==e.state&&o(e.state.href,!1)},!0}});var k="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";function N(){}var x,T=(function(e){e.exports=function(){function e(e,t,n,r,a,o){if(o!==k){var i=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw i.name="Invariant Violation",i}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=N,n.PropTypes=n,n}()}(x={exports:{}},x.exports),x.exports),I=function(){},L={},B=[],A=[];function O(e,t){var n,r,a,o,i=A;for(o=arguments.length;o-- >2;)B.push(arguments[o]);for(t&&null!=t.children&&(B.length||B.push(t.children),delete t.children);B.length;)if((r=B.pop())&&void 0!==r.pop)for(o=r.length;o--;)B.push(r[o]);else"boolean"==typeof r&&(r=null),(a="function"!=typeof e)&&(null==r?r="":"number"==typeof r?r=String(r):"string"!=typeof r&&(a=!1)),a&&n?i[i.length-1]+=r:i===A?i=[r]:i.push(r),n=a;var s=new I;return s.nodeName=e,s.children=i,s.attributes=null==t?void 0:t,s.key=null==t?void 0:t.key,s}function P(e,t){for(var n in t)e[n]=t[n];return e}var R="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;var j=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,U=[];function H(e){!e._dirty&&(e._dirty=!0)&&1==U.push(e)&&R(D)}function D(){var e,t=U;for(U=[];e=t.pop();)e._dirty&&oe(e)}function M(e,t){return e.normalizedNodeName===t||e.nodeName.toLowerCase()===t.toLowerCase()}function W(e){var t=P({},e.attributes);t.children=e.children;var n=e.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===t[r]&&(t[r]=n[r]);return t}function q(e){var t=e.parentNode;t&&t.removeChild(e)}function V(e,t,n,r,a){if("className"===t&&(t="class"),"key"===t);else if("ref"===t)n&&n(null),r&&r(e);else if("class"!==t||a)if("style"===t){if(r&&"string"!=typeof r&&"string"!=typeof n||(e.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var o in n)o in r||(e.style[o]="");for(var o in r)e.style[o]="number"==typeof r[o]&&!1===j.test(o)?r[o]+"px":r[o]}}else if("dangerouslySetInnerHTML"===t)r&&(e.innerHTML=r.__html||"");else if("o"==t[0]&&"n"==t[1]){var i=t!==(t=t.replace(/Capture$/,""));t=t.toLowerCase().substring(2),r?n||e.addEventListener(t,z,i):e.removeEventListener(t,z,i),(e._listeners||(e._listeners={}))[t]=r}else if("list"!==t&&"type"!==t&&!a&&t in e){try{e[t]=null==r?"":r}catch(e){}null!=r&&!1!==r||"spellcheck"==t||e.removeAttribute(t)}else{var s=a&&t!==(t=t.replace(/^xlink:?/,""));null==r||!1===r?s?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.removeAttribute(t):"function"!=typeof r&&(s?e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),r):e.setAttribute(t,r))}else e.className=r||""}function z(e){return this._listeners[e.type](e)}var F=[],G=0,J=!1,X=!1;function Y(){for(var e;e=F.pop();)e.componentDidMount&&e.componentDidMount()}function K(e,t,n,r,a,o){G++||(J=null!=a&&void 0!==a.ownerSVGElement,X=null!=e&&!("__preactattr_"in e));var i=Q(e,t,n,r,o);return a&&i.parentNode!==a&&a.appendChild(i),--G||(X=!1,o||Y()),i}function Q(e,t,n,r,a){var o=e,i=J;if(null!=t&&"boolean"!=typeof t||(t=""),"string"==typeof t||"number"==typeof t)return e&&void 0!==e.splitText&&e.parentNode&&(!e._component||a)?e.nodeValue!=t&&(e.nodeValue=t):(o=document.createTextNode(t),e&&(e.parentNode&&e.parentNode.replaceChild(o,e),Z(e,!0))),o.__preactattr_=!0,o;var s,l,u=t.nodeName;if("function"==typeof u)return function(e,t,n,r){var a=e&&e._component,o=a,i=e,s=a&&e._componentConstructor===t.nodeName,l=s,u=W(t);for(;a&&!l&&(a=a._parentComponent);)l=a.constructor===t.nodeName;a&&l&&(!r||a._component)?(ae(a,u,3,n,r),e=a.base):(o&&!s&&(ie(o),e=i=null),a=ne(t.nodeName,u,n),e&&!a.nextBase&&(a.nextBase=e,i=null),ae(a,u,1,n,r),e=a.base,i&&e!==i&&(i._component=null,Z(i,!1)));return e}(e,t,n,r);if(J="svg"===u||"foreignObject"!==u&&J,u=String(u),(!e||!M(e,u))&&(s=u,(l=J?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)).normalizedNodeName=s,o=l,e)){for(;e.firstChild;)o.appendChild(e.firstChild);e.parentNode&&e.parentNode.replaceChild(o,e),Z(e,!0)}var c=o.firstChild,d=o.__preactattr_,p=t.children;if(null==d){d=o.__preactattr_={};for(var h=o.attributes,m=h.length;m--;)d[h[m].name]=h[m].value}return!X&&p&&1===p.length&&"string"==typeof p[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=p[0]&&(c.nodeValue=p[0]):(p&&p.length||null!=c)&&function(e,t,n,r,a){var o,i,s,l,u,c=e.childNodes,d=[],p={},h=0,m=0,f=c.length,v=0,g=t?t.length:0;if(0!==f)for(var y=0;y<f;y++){var b=c[y],w=b.__preactattr_,S=g&&w?b._component?b._component.__key:w.key:null;null!=S?(h++,p[S]=b):(w||(void 0!==b.splitText?!a||b.nodeValue.trim():a))&&(d[v++]=b)}if(0!==g)for(var y=0;y<g;y++){l=t[y],u=null;var S=l.key;if(null!=S)h&&void 0!==p[S]&&(u=p[S],p[S]=void 0,h--);else if(m<v)for(o=m;o<v;o++)if(void 0!==d[o]&&(_=i=d[o],E=a,"string"==typeof(C=l)||"number"==typeof C?void 0!==_.splitText:"string"==typeof C.nodeName?!_._componentConstructor&&M(_,C.nodeName):E||_._componentConstructor===C.nodeName)){u=i,d[o]=void 0,o===v-1&&v--,o===m&&m++;break}u=Q(u,l,n,r),s=c[y],u&&u!==e&&u!==s&&(null==s?e.appendChild(u):u===s.nextSibling?q(s):e.insertBefore(u,s))}var _,C,E;if(h)for(var y in p)void 0!==p[y]&&Z(p[y],!1);for(;m<=v;)void 0!==(u=d[v--])&&Z(u,!1)}(o,p,n,r,X||null!=d.dangerouslySetInnerHTML),function(e,t,n){var r;for(r in n)t&&null!=t[r]||null==n[r]||V(e,r,n[r],n[r]=void 0,J);for(r in t)"children"===r||"innerHTML"===r||r in n&&t[r]===("value"===r||"checked"===r?e[r]:n[r])||V(e,r,n[r],n[r]=t[r],J)}(o,t.attributes,d),J=i,o}function Z(e,t){var n=e._component;n?ie(n):(null!=e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),!1!==t&&null!=e.__preactattr_||q(e),ee(e))}function ee(e){for(e=e.lastChild;e;){var t=e.previousSibling;Z(e,!0),e=t}}var te=[];function ne(e,t,n){var r,a=te.length;for(e.prototype&&e.prototype.render?(r=new e(t,n),se.call(r,t,n)):((r=new se(t,n)).constructor=e,r.render=re);a--;)if(te[a].constructor===e)return r.nextBase=te[a].nextBase,te.splice(a,1),r;return r}function re(e,t,n){return this.constructor(e,n)}function ae(e,t,n,r,a){e._disable||(e._disable=!0,e.__ref=t.ref,e.__key=t.key,delete t.ref,delete t.key,void 0===e.constructor.getDerivedStateFromProps&&(!e.base||a?e.componentWillMount&&e.componentWillMount():e.componentWillReceiveProps&&e.componentWillReceiveProps(t,r)),r&&r!==e.context&&(e.prevContext||(e.prevContext=e.context),e.context=r),e.prevProps||(e.prevProps=e.props),e.props=t,e._disable=!1,0!==n&&(1!==n&&!1===L.syncComponentUpdates&&e.base?H(e):oe(e,1,a)),e.__ref&&e.__ref(e))}function oe(e,t,n,r){if(!e._disable){var a,o,i,s=e.props,l=e.state,u=e.context,c=e.prevProps||s,d=e.prevState||l,p=e.prevContext||u,h=e.base,m=e.nextBase,f=h||m,v=e._component,g=!1,y=p;if(e.constructor.getDerivedStateFromProps&&(l=P(P({},l),e.constructor.getDerivedStateFromProps(s,l)),e.state=l),h&&(e.props=c,e.state=d,e.context=p,2!==t&&e.shouldComponentUpdate&&!1===e.shouldComponentUpdate(s,l,u)?g=!0:e.componentWillUpdate&&e.componentWillUpdate(s,l,u),e.props=s,e.state=l,e.context=u),e.prevProps=e.prevState=e.prevContext=e.nextBase=null,e._dirty=!1,!g){a=e.render(s,l,u),e.getChildContext&&(u=P(P({},u),e.getChildContext())),h&&e.getSnapshotBeforeUpdate&&(y=e.getSnapshotBeforeUpdate(c,d));var b,w,S=a&&a.nodeName;if("function"==typeof S){var _=W(a);(o=v)&&o.constructor===S&&_.key==o.__key?ae(o,_,1,u,!1):(b=o,e._component=o=ne(S,_,u),o.nextBase=o.nextBase||m,o._parentComponent=e,ae(o,_,0,u,!1),oe(o,1,n,!0)),w=o.base}else i=f,(b=v)&&(i=e._component=null),(f||1===t)&&(i&&(i._component=null),w=K(i,a,u,n||!h,f&&f.parentNode,!0));if(f&&w!==f&&o!==v){var C=f.parentNode;C&&w!==C&&(C.replaceChild(w,f),b||(f._component=null,Z(f,!1)))}if(b&&ie(b),e.base=w,w&&!r){for(var E=e,k=e;k=k._parentComponent;)(E=k).base=w;w._component=E,w._componentConstructor=E.constructor}}for(!h||n?F.unshift(e):g||e.componentDidUpdate&&e.componentDidUpdate(c,d,y);e._renderCallbacks.length;)e._renderCallbacks.pop().call(e);G||r||Y()}}function ie(e){var t=e.base;e._disable=!0,e.componentWillUnmount&&e.componentWillUnmount(),e.base=null;var n=e._component;n?ie(n):t&&(t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),e.nextBase=t,q(t),te.push(e),ee(t)),e.__ref&&e.__ref(null)}function se(e,t){this._dirty=!0,this.context=t,this.props=e,this.state=this.state||{},this._renderCallbacks=[]}P(se.prototype,{setState:function(e,t){this.prevState||(this.prevState=this.state),this.state=P(P({},this.state),"function"==typeof e?e(this.state,this.props):e),t&&this._renderCallbacks.push(t),H(this)},forceUpdate:function(e){e&&this._renderCallbacks.push(e),oe(this,2)},render:function(){}});var le={h:O,createElement:O,cloneElement:function(e,t){return O(e.nodeName,P(P({},e.attributes),t),arguments.length>2?[].slice.call(arguments,2):e.children)},Component:se,render:function(e,t,n){return K(n,e,{},!1,t,!1)},rerender:D,options:L};function ue(e){var t=e.children,n=e.store,r=n.get(),a=!0===r?"selected":"",o=!1===r?"selected":"";return le.h("div",null,le.h("div",{key:"caption"},t),le.h("div",{key:"question"},le.h("span",{class:"switch fa fa-thumbs-up good "+a,onClick:function(){return n.set(!0)}}),le.h("span",{class:"switch fa fa-thumbs-down bad "+o,onClick:function(){return n.set(!1)}})))}function ce(e){var t=e.placeholder,n=e.store;return le.h("textarea",{placeholder:t,onChange:function(e){return n.set(e.target.value)},value:n.get()||""})}ue.propTypes={children:T.arrayOf(T.node),store:T.objectOf(T.func).isRequired},ce.propTypes={placeholder:T.string,store:T.objectOf(T.func).isRequired};var de="Initial",pe=function(e){function r(e){t(this,r);var n=i(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return n.state={state:de},n.onSubmit=n.onSubmit.bind(n),n.onToggle=n.onToggle.bind(n),n}return o(r,e),n(r,[{key:"onSubmit",value:function(){this.props.onSubmit(this.state.state),this.setState({state:"Voted"})}},{key:"onToggle",value:function(){this.props.onClear(),this.state.state===de?this.setState({state:"NotVoted"}):this.setState({state:de})}},{key:"render",value:function(e,t){var n=this,r=e.children,a=e.voteAcknowledgement,o=t.state,i=o===de?"deluge-body":"deluge-body deluge-body-expanded",s=o===de?"deluge-header":"deluge-header deluge-header-expanded",l=o===de?"deluge":"deluge deluge-expanded",u=null;if("Voted"===o&&"down"===a)u=le.h("p",null,"If this page contains an error, you may ",le.h("a",{class:"deluge-fix-button",href:"https://jira.mongodb.org/"},"report the problem on Jira."));else if("Voted"!==o||a){if("NotVoted"===o)u=[le.h("a",{key:"voteup",id:"rate-up",onClick:function(){return n.setState({state:!0})},class:"deluge-vote-button"},"Yes"),le.h("a",{key:"votedown",id:"rate-down",onClick:function(){return n.setState({state:!1})},class:"deluge-vote-button"},"No")];else if("boolean"==typeof o){var c=!1===o?le.h("li",null,"We're sorry! Please help us improve this page."):null;u=le.h("div",{class:"deluge-questions"},le.h("ul",null,c,r.map(function(e,t){return le.h("li",{key:t},e)})),le.h("div",{class:"deluge-button-group"},le.h("button",{onClick:this.onToggle},"Cancel"),le.h("button",{class:"primary",onClick:this.onSubmit},"Submit")))}}else u=le.h("p",null,"Submitting feedback...");return le.h("div",{class:l},le.h("div",{class:s,onClick:this.onToggle},o===de&&le.h("span",{class:"fa fa-comments deluge-comment-icon"}),le.h("span",{class:"deluge-helpful"},"Was this page helpful?"),o!==de&&le.h("span",{class:"fa fa-angle-down deluge-close-icon"})),le.h("div",{class:i},"Voted"===o&&"up"===a&&le.h("p",null,"Thank you for your feedback!"),u))}}]),r}(le.Component);pe.propTypes={onSubmit:T.func.isRequired,onClear:T.func.isRequired,children:T.arrayOf(T.node),voteAcknowledgement:T.string};var he=function(e){function s(e){t(this,s);var n=i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,e));return n.state={answers:{},voteAcknowledgement:null},n.onSubmit=n.onSubmit.bind(n),n}return o(s,e),n(s,[{key:"onSubmit",value:function(e){for(var t=this,n={},r=this.state.answers,a=Object.keys(r),o=0;o<a.length;o+=1){var i=a[o];(r[i]||!1===r[i])&&(n[i]=r[i])}this.sendRating(e,n).then(function(){t.setState({voteAcknowledgement:e?"up":"down"})}).catch(function(e){console.error(e)})}},{key:"sendRating",value:function(e,t){var n=this.props.project+"/"+this.props.path,r=a({useful:e},t);try{var o=window.analytics.user(),i=o.id();i?t.segmentUID=i.toString():t.segmentAnonymousID=o.anonymousId().toString(),window.analytics.track("Feedback Submitted",r)}catch(e){console.error(e)}return new Promise(function(r,o){var i=function(e,t){return e+"?"+Object.keys(t).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(JSON.stringify(t[e]))}).join("&")}("http://deluge.us-east-1.elasticbeanstalk.com/",a({},t,{v:e,p:n,url:location.href})),s=new Image;s.onload=function(){return r()},s.onerror=function(){return o(new Error("Failed to report feedback"))},s.src=i})}},{key:"makeStore",value:function(e){var t=this;return{get:function(){return t.state.answers[e]},set:function(n){return t.setState(function(t){return{answers:a({},t.answers,r({},e,n))}})}}}},{key:"render",value:function(e,t){var n=this,r=t.voteAcknowledgement;return le.h(pe,{voteAcknowledgement:r,onSubmit:this.onSubmit,onClear:function(){return n.setState({answers:{}})}},le.h(ce,{store:this.makeStore("reason"),placeholder:"What were you looking for?"}),le.h(ue,{store:this.makeStore("findability")},"Did you find it?"),le.h(ue,{store:this.makeStore("accuracy")},"Was the information you found ",le.h("strong",null,"accurate")),le.h(ue,{store:this.makeStore("clarity")},"Was the information ",le.h("strong",null,"clear"),"?"),le.h(ue,{store:this.makeStore("fragmentation")},"Was the information you needed ",le.h("strong",null,"all on one page"),"?"))}}]),s}(le.Component);he.propTypes={project:T.string.isRequired,path:T.string.isRequired};var me=null,fe=null,ve=["meta/404","search"];var ge=Object.freeze({init:function(){me=document.body.getAttribute("data-project"),fe=document.getElementById("rating-panel")},setup:function(){void 0!==window.localStorage&&fe&&function(e,t,n){le.render("",n,n._delugeRendered),t&&(n._delugeRendered=le.render(le.h(he,{project:e,path:t}),n))}(me,function(){var e=document.getElementsByClassName("body");if(!e.length)return null;var t=e[0].getAttribute("data-pagename");return ve.indexOf(t)>=0?null:t}(),fe)}}),ye=new h;function be(){return JSON.parse(window.localStorage.getItem("tabPref"))||{}}function we(e,t){var n=be();t?(n.pages||(n.pages={}),n.pages[window.location.pathname]=e.tabId):n[e.type]=e.tabId,window.localStorage.setItem("tabPref",JSON.stringify(n))}var Se={},_e=function(){function e(n,r,a,o){t(this,e),this.type=n,this.tabStrips=a,this.tabContents=o,this.anonymous=r,this.tabIds={}}return n(e,[{key:"getFirstTabId",value:function(){var e=this.tabStrips[0].querySelector(".tab-strip__element[aria-selected=true]");return e?e.getAttribute("data-tabid"):null}},{key:"setup",value:function(){var e=this;if(0!==this.tabStrips.length){!function(){if(document.querySelector(".tabs-top")){var e=$(".tab-strip--singleton"),t=e.first();e.slice(1).detach(),t.detach().insertAfter("h1").first()}}();for(var t=0,n=this.tabStrips,r=n.length;t<r;t++)for(var a=function(t,n,r){var a=n[t];e.tabIds[a.getAttribute("data-tabid")]=!0,a.onclick=function(t){var n=a.getBoundingClientRect(),r=window.scrollY-n.y,o=t.target.getAttribute("data-tabid"),i={};if(i.tabId=o,i.type=e.type,o){e.update(o,!0);var s=a.getBoundingClientRect();window.scrollTo(s.x,s.y+r),p("Tab Selected",{tabId:o,title:t.target.innerText,tabSet:e.type}),t.preventDefault()}}},o=0,i=n[t].querySelectorAll("[data-tabid]"),s=i.length;o<s;o++)a(o,i);this.update(null,!1)}}},{key:"update",value:function(e,t){if(0!==this.tabStrips.length){if(!e){var n=be();this.anonymous&&n.pages&&n.pages[window.location.pathname]?e=n.pages[window.location.pathname]:n[this.type]&&(e=n[this.type])}(e&&this.tabIds[e]||(e=this.getFirstTabId()))&&ye.dispatch({isUserAction:t,tabId:e,type:this.type})}}},{key:"showHideSelectedTab",value:function(e){for(var t=0,n=this.tabStrips,r=n.length;t<r;t++){var a=n[t],o=$(a.querySelector('[data-tabid="'+e+'"]'));if(o.length){var i=o.parent("ul"),s=$(a.querySelector(".dropdown-toggle")),l=$(a.querySelector(".dropdown"));i.hasClass("dropdown-menu")?(s.text(""+o.first().text()).append('<span class="caret"></span>'),l.attr("aria-selected",!0).siblings().attr("aria-selected",!1)):(o.attr("aria-selected",!0).siblings().attr("aria-selected",!1),s.text("Other ").append('<span class="caret"></span>'))}}for(var u="tabpanel-"+e,c=0,d=this.tabContents,p=d.length;c<p;c++)for(var h=0,m=d[c].children,f=m.length;h<f;h++){var v=m[h];v.classList.contains(u)?v.style.display="block":v.style.display="none"}}}],[{key:"register",value:function(t){var n=c(t.getElementsByClassName("tab-strip--singleton")),r=t.querySelector(".tabs__content"),a=t.getAttribute("data-tab-preference"),o=!1;if(!a){var i=t.querySelector("[data-tabid]");if(!i)return;a="anonymous-"+i.getAttribute("data-tabid"),o=!0}if(Se[a]){var s=Se[a];return s.tabStrips=s.tabStrips.concat(n),void s.tabContents.push(r)}var l=new e(a,o,n,[r],!1);Se[a]=l}}]),e}();ye.listen(function(e){var t=Se[e.type];t&&(e.isUserAction&&we(e,t.anonymous),t.showHideSelectedTab(e.tabId))});var Ce=Object.freeze({tabsEventDispatcher:ye,getTabPref:be,setTabPref:we,setup:function(){Se={};for(var e=document.getElementsByClassName("tabs"),t=0;t<e.length;t+=1)_e.register(e[t]);for(var n=0,r=Object.keys(Se),a=r.length;n<a;n++){var o=r[n];Se[o].setup()}}}),Ee=[];function ke(){var e=document.body.clientHeight-window.innerHeight,t=document.documentElement.scrollTop/e;t=(document.documentElement.scrollTop+.8*t*window.innerHeight)/e;for(var n=[1/0,null],r=0,a=Ee.length;r<a;r++){var o=s(Ee[r],2),i=o[0],l=o[1];l.classList.remove("active");var u=i.offsetTop/e,c=Math.abs(u-t);c<=n[0]&&(n=[c,l])}n[1]&&n[1].classList.add("active")}function Ne(e){var t=e.target.getAttribute("data-tab-preference");t&&we({tabId:t,type:"languages"},!1)}document.addEventListener("scroll",function(e,t){var n=null,r=null,a=null,o=0;function i(){o=Date.now(),a=null,r=e.apply.apply(e,l(n)),a||(n=null)}return function(){for(var s=Date.now(),u=t-(s-o),c=arguments.length,d=Array(c),p=0;p<c;p++)d[p]=arguments[p];return n=d,u<=0||u>t?(a&&(window.clearTimeout(a),a=null),o=s,r=e.apply(void 0,l(n)),a||(n=null)):a||(a=window.setTimeout(i,u)),r}}(ke,150));var xe=document.getElementsByClassName("show-current-language");ye.listen(function(e){if("languages"===e.type)for(var t=0;t<xe.length;t+=1)xe[t].innerText=e.tabId});var Te=Object.freeze({setup:function(){!function(){var e=document.querySelector(".left-toc");if(e){Ee.length=0;for(var t=0,n=e.querySelectorAll("a"),r=n.length;t<r;t++){var a=n[t],o=a.getAttribute("href").slice(1);if(o){var i=document.getElementById(o);i&&Ee.push([i,a.parentElement])}}ke()}}(),function(){var e=document.getElementsByClassName("guide-category-list")[0];if(e)for(var t=e.getElementsByClassName("guide__pill"),n=0;n<t.length;n+=1)t[n].onclick=Ne}()}}),$e="lightbox__content--activated",Ie="lightbox__content--scalable",Le=document.createElement("div");Le.className="lightbox__modal",Le.title="click to close";var Be=document.createElement("img");function Ae(e){"keydown"===e.type&&"Escape"!==e.key||(Be.classList.remove($e),Le.parentNode&&Le.parentNode.removeChild(Le))}function Oe(e){var t=document.createElement("div"),n=document.createElement("div");t.className="lightbox__imageWrapper",n.className="lightbox__caption",n.innerText="click to enlarge",e.parentNode.replaceChild(t,e),t.appendChild(e),t.appendChild(n),t.addEventListener("click",function(){document.body.appendChild(Le),Be.src=e.src,Be.alt=e.alt+" — Enlarged",/\.svg$/.test(Be.src)?Be.classList.add(Ie):Be.classList.remove(Ie),Le.addEventListener("click",Ae),setTimeout(function(){Be.classList.add($e)},0)})}function Pe(e,t){var n=t.naturalWidth*t.naturalHeight;t.clientWidth*t.clientHeight<.9*n&&(Oe(t),e.classList.add("lightbox"))}Be.className="lightbox__content",Le.appendChild(Be);var Re=Object.freeze({setup:function(){for(var e=0,t=document.getElementsByClassName("lightbox"),n=t.length;e<n;e++){var r=t[e];0!==r.children.length&&"IMG"===r.children[0].tagName&&Oe(r.children[0])}for(var a=0,o=document.getElementsByClassName("figure"),i=o.length;a<i;a++){var s=o[a];if(0!==s.children.length&&"IMG"===s.children[0].tagName&&!s.classList.contains("lightbox")){var l=s.children[0];l.complete?Pe(s,l):l.addEventListener("load",Pe.bind(null,s,l))}}document.addEventListener("keydown",Ae)}}),je="apiref-resource--collapsed";function Ue(e,t){var n=null;e.addEventListener("mousedown",function(e){0===e.button&&(n=e)}),e.addEventListener("mouseup",function(e){if(0===e.button){var r=n;n=null,(!r||Math.abs(e.clientX-r.clientX)<50&&Math.abs(e.clientY-r.clientY)<50)&&t()}})}function He(e,t){if(t.id){var n="#"+t.id;window.history.pushState({href:n},"",n)}t.classList[e](je)}function De(){var e=document.location.hash.slice(1);if(e){var t=document.getElementById(e);t&&t.classList.contains("apiref-resource")&&He("remove",t)}}window.addEventListener("hashchange",De,!1);var Me=Object.freeze({setup:function(){for(var e=document.getElementsByClassName("apiref-resource__header"),t=0;t<e.length;t+=1){var n=e[t];Ue(n,He.bind(null,"toggle",n.parentElement))}De()}});function We(e,t){var n=t.target.getAttribute("data-tabid");ye.dispatch({isUserAction:!0,tabId:n,type:e}),p("Pill Selected",{tabId:n,title:t.target.innerText,pillSet:e})}var qe={};ye.listen(function(e){for(var t=0,n=qe[e.type]||[],r=n.length;t<r;t++)for(var a=n[t].getElementsByClassName("guide__pill"),o=0;o<a.length;o+=1){a[o].getAttribute("data-tabid")===e.tabId?a[o].classList.add("guide__pill--active"):a[o].classList.remove("guide__pill--active")}});var Ve=Object.freeze({setup:function(){qe={};for(var e=0,t=document.querySelectorAll(".pillstrip-declaration"),n=t.length;e<n;e++){var r=t[e],a=r.getAttribute("data-tab-preference");a&&(void 0===qe[a]&&(qe[a]=[]),qe[a].push(r))}for(var o=0,i=Object.keys(qe),l=i.length;o<l;o++){for(var u=i[o],d=qe[u],p=document.querySelectorAll('.tabs[data-tab-preference="'+u+'"] > .tab-strip'),h={},m=[],f=0,v=p.length;f<v;f++){var g=p[f];g.style.display="none";for(var y=-1,b=c(g.querySelectorAll(".tab-strip__element[data-tabid]")),w=0,S=b=b.concat(c(g.querySelectorAll(".tab-strip__dropdown > li"))),_=S.length;w<_;w++){var C=S[w];y+=1;var E=C.getAttribute("data-tabid");void 0===h[E]&&(h[E]=!0,m.splice(y,0,[E,C.innerText]))}}for(var k=We.bind(void 0,u),N=0,x=d.length;N<x;N++)for(var T=d[N],$=0,I=m.length;$<I;$++){var L=s(m[$],2),B=L[0],A=L[1],O=document.createElement("li");O.className="guide__pill",O.setAttribute("data-tabid",B),O.innerText=A,O.onclick=k,T.appendChild(O)}}}});function ze(e){return e.hasClass("current")}var Fe=Object.freeze({setup:function(){if("stitch"!==$("body").attr("data-project")){var e=$(".sidebar a.current");(u(e)||d(e)||ze(e))&&e.parent("li").addClass("selected-item"),e.parents("ul").each(function(e,t){$(t).css("display","block")}),$(".sphinxsidebarwrapper > ul li:not(.current) > ul:not(.current)").hide(),$(".sphinxsidebarwrapper").show(),$(".sphinxsidebarwrapper .toctree-l1").on("click","a",function(t){var n=$(t.currentTarget);u(n)||!n.parent().hasClass("selected-item")&&d(n)||(t.preventDefault(),n.parent().hasClass("current")?(n.parent().removeClass("current selected-item"),n.siblings("ul").slideUp()):(e.parent().removeClass("selected-item"),e.parents().add(e.siblings("ul")).each(function(e,n){var r=$(n);r.has(t.currentTarget).length||(r.is("ul")?r.removeClass("current").slideUp():r.removeClass("current"))}),n.parent().addClass("current"),n.siblings("ul").slideDown(function(){(u(n)||d(n)||ze(e))&&n.parent("li").addClass("selected-item")}),e=n))}),$(".sphinxsidebarwrapper > ul ul a.reference").prepend(function(e){var t=$('<span class="expand-icon"></span>');return u($(this))||t.addClass("docs-expand-arrow"),t})}}}),Ge=400;$(".sidebar a.current");function Je(e){return e.hasClass("current")}function Xe(e){e.preventDefault();var t,n=$(e.currentTarget).parent();function r(e){var t=e.children("h3"),n=e.children(":not(h3)");t.removeClass("open"),n.slideUp(Ge,function(){e.add(e.children()).removeClass("current")})}Je(n)?r(n):(r($("li.toctree-l1.current")),(t=n).add(t.children()).addClass("current"),t.children("ul.toc-section-root").slideDown(Ge))}function Ye(e){e.preventDefault();var t,n,r,a=$(e.currentTarget).parent();Je(a)?(n=(t=a).children("h4"),r=t.children(":not(h4)"),n.removeClass("open"),r.slideUp(Ge,function(){t.add(t.children()).removeClass("current")})):function(e){var t=e.children("h4"),n=e.children(":not(h4)");t.addClass("open current"),n.slideDown(Ge,function(){e.addClass("current"),n.addClass("current")})}(a)}function Ke(e){e.preventDefault();var t=$(e.currentTarget),n=t.parent().siblings("ul.toc-section-nested");t.hasClass("is-closed")?(n.slideDown(),t.removeClass("is-closed"),t.addClass("is-open")):(n.slideUp(),t.removeClass("is-open"),t.addClass("is-closed"))}var Qe=Object.freeze({setup:function(){var e,t,n,r,a,o;"stitch"===$("body").attr("data-project")&&($(".sidebar a.current").parent("li").addClass("selected-item"),t=$(".sphinxsidebarwrapper"),n=$("ul.toc-section-root.current"),r=$("ul.toc-section-root:not(.current)"),a=$("ul.toc-section-nested.current"),o=$("ul.toc-section-nested:not(.current)"),n.show(),a.show(),r.hide(),o.hide(),t.show(),(e=$(".toctree-root .toctree-l1")).on("click","h3",Xe),e.on("click","h4",Ye),e.on("click","a span.nested-page-toggle",Ke),function(){$("ul.toctree-root li:not(.contains-nested) > a.reference").prepend(function(){return $('<span class="page-icon"></span>')});var e=$("li.contains-nested > a:not(.current)").filter($("li.contains-nested > ul:not(.toc-section-nested.current)").siblings("a")),t=$("li.contains-nested > a.current").add($("li.contains-nested > ul.toc-section-nested.current").siblings("a"));e.prepend('<span class="nested-page-toggle is-closed"></span>'),t.prepend('<span class="nested-page-toggle is-open contains-current-page"></span>'),$("ul.toc-section-nested a.reference").prepend(function(){return $('<span class="nested-page-line"></span>')})}())}}),Ze={charts:.12158,guides:.02644,stitch:.03162,"docs-ruby":.47984,ecosystem:.00997,"docs-php-library":.04165,atlas:.01176,compass:.01684,manual:22e-5,landing:.00806,mongoid:.07576,"mms-cloud":.06358,"mms-onprem":.0179,"bi-connector":.03912,"spark-connector":.05562};function et(){!function(e,t,n,r,a){if(!e[a]){for(var o=e[a]=[],i=0;i<n.length;i++){var s=n[i];o[s]=o[s]||function(e){return function(){var t=Array.prototype.slice.call(arguments);o.push([e,t])}}(s)}o.SNIPPET_VERSION="1.0.1";var l=t.createElement("script");l.type="text/javascript",l.async=!0,l.src="https://d2yyd1h5u9mauk.cloudfront.net/integrations/web/v1/library/Dk30CC86ba0nATlK/"+a+".js";var u=t.getElementsByTagName("script")[0];u.parentNode.insertBefore(l,u)}}(window,document,["survey","reset","config","init","set","get","event","identify","track","page","screen","group","alias"],0,"delighted"),function(){var e=window.analytics=window.analytics||[];if(!e.initialize)if(e.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{e.invoked=!0,e.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],e.factory=function(t){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(t),e.push(n),e}};for(var t=0;t<e.methods.length;t++){var n=e.methods[t];e[n]=e.factory(n)}e.load=function(t,n){var r=document.createElement("script");r.type="text/javascript",r.async=!0,r.src="https://cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(r,a),e._loadOptions=n},e.SNIPPET_VERSION="4.1.0",e.load("aGhVvyxnPWlyP71vVl9ZjGWxAtoVGLXX")}}()}var tt=Object.freeze({initialize:et,setup:function(e){var t=document.body.getAttribute("data-project"),n=document.body.getAttribute("data-branch");try{var r=Ze[t]||.1;window.delighted.survey({minTimeOnPage:180,sampleFactor:r,properties:{project:t,branch:n}})}catch(e){console.error(e)}try{window.analytics.page({path:location.pathname,url:location.href,project:t,branch:n})}catch(e){console.error(e)}}}),nt="guide__deploymentpill--active",rt="guide__pill",at="guide__deploymentpill",ot="show-current-deployment";function it(e){for(var t=document.getElementsByClassName(rt),n=0;n<t.length;n+=1){t[n].getAttribute("data-tabid")===e?t[n].classList.add(nt):t[n].classList.remove(nt)}document.getElementsByClassName(ot).length>0&&(document.getElementsByClassName(ot)[0].innerHTML=e)}function st(e,t){var n=document.createElement("li");return n.classList.add(rt),n.classList.add(at),n.setAttribute("data-tabid",e),n.innerHTML=e,function(e){e.addEventListener("click",function(e){ye.dispatch({isUserAction:!0,tabId:e.target.innerHTML,type:"cloud"})})}(n),it(e),n}ye.listen(function(e){"cloud"===e.type&&it(e.tabId)});var lt,ut=Object.freeze({setup:function(){var e=document.getElementsByClassName("guide-prefs__deploy")[0];if(void 0!==e)if(0===document.getElementsByClassName("tabpanel-cloud").length&&document.getElementsByClassName("guide-prefs__deploy").length>0)document.getElementsByClassName("guide-prefs__deploy")[0].style.display="none";else{var t=be();void 0===t.cloud&&(t.cloud="local");var n,r=document.createElement("ul");r.classList.add("guide__pills"),r.classList.add("pillstrip-declaration"),r.setAttribute("role","tablist"),r.setAttribute("data-tab-preference","cloud"),r.appendChild(st("cloud",t.cloud)),r.appendChild(st("local",t.cloud)),e.appendChild(r),it(t.cloud),n=t.cloud,ye.dispatch({isUserAction:!0,tabId:n,type:"cloud"})}}}),ct=(r(lt={},"local MongoDB",{options:[{name:"authSource",type:"text"}],template:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]",templatePasswordRedactedShell:"mongodb://$[hostlist]/$[database]?$[options] --username $[username]",templateShell:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]"}),r(lt,"local MongoDB with replica set",{options:[{name:"replicaSet",type:"text"},{name:"authSource",type:"text"},{name:"ssl",type:"pass-through",value:"true"}],template:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]",templatePasswordRedactedShell:"mongodb://$[hostlist]/$[database]?$[options] --username $[username] --password",templateShell:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]"}),r(lt,"Atlas (Cloud) v. 3.6",{options:[],template:"mongodb+srv://$[username]:$[password]@$[hostlist]/$[database]?retryWrites=true",templatePasswordRedactedShell:"mongodb+srv://$[hostlist]/$[database] --username $[username] --password",templateShell:"mongodb+srv://$[username]:$[password]@$[hostlist]/$[database]"}),r(lt,"Atlas (Cloud) v. 3.4",{options:[{name:"replicaSet",type:"text"},{name:"authSource",type:"text"},{name:"ssl",type:"pass-through",value:"true"}],template:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]",templatePasswordRedactedShell:"mongodb://$[hostlist]/$[database]?replicaSet=$[replicaSet] --ssl --authenticationDatabase $[authSource] --username $[username] --password",templateShell:"mongodb://$[hostlist]/$[database]?replicaSet=$[replicaSet] --ssl --authenticationDatabase $[authSource] --username $[username] --password $[password]"}),lt);function dt(e,t){return"pass-through"===t.type?t.value:e}var pt=/&lt;(?:(?:URISTRING(?:_(?:(?:SHELL_NOUSER)|(?:SHELL)))?)|(?:USERNAME))&gt;/g;var ht=function(){function e(n,r){t(this,e),this.root=n,this.uriWriter=r,this.elementPairs=[],this.updateHostsFromUriWriter()}return n(e,[{key:"updateHostsFromUriWriter",value:function(){this.elementPairs=[],this.root.innerText="";for(var e=0,t=this.uriWriter.loadState(this.uriWriter.loadCurrentState()).hostlist||[],n=t.length;e<n;e++){var r=t[e];this.addHost(r)}this.addHost()}},{key:"addHost",value:function(e){var t=this,n=document.createElement("input");n.className="mongodb-form__input",n.placeholder="localhost:27017",n.value=e||"";var r=document.createElement("div");r.className="mongodb-form__status",n.oninput=function(){if(n.value)t.lastInput===n&&t.addHost();else if(t.lastInput!==n)return t.elementPairs=t.elementPairs.filter(function(e){return e[0]!==n}),t.root.removeChild(n),t.root.removeChild(r),void t.uriWriter.setHosts(t.hosts);try{!function(e){var t=/^\s*([^:\s]+)(?::(\d+))?\s*$/.exec(e);if(!t)throw new Error('Invalid host format: must match the format "hostname:port"');var n=parseInt(t[2],10);if(isNaN(n))throw new Error('Missing port: host must match the format "hostname:port"');if(n>65535)throw new Error("Port number is too large");t[1]}(n.value)}catch(e){return n.setCustomValidity(e.message),r.innerText=e.message,void r.classList.add("mongodb-form__status--invalid")}r.innerText="",r.classList.remove("mongodb-form__status--invalid"),n.setCustomValidity(""),t.uriWriter.setHosts(t.hosts)},this.root.appendChild(n),this.root.appendChild(r),this.elementPairs.push([n,r])}},{key:"hosts",get:function(){return this.elementPairs.map(function(e){return e[0].value.trim()}).filter(function(e){return e})}},{key:"lastInput",get:function(){return this.elementPairs[this.elementPairs.length-1][0]}}]),e}(),mt=null,ft=function(){function e(){t(this,e),this.uristowrite=[],this.usernamestowrite=[],this.uristowritepasswordredactedshell=[],this.uristowriteshell=[],this.urireplacestring="",this.options={},this.hostList=null,this.setupURIListeners(),this.loadTemplateEnv(),this.renderURI(),this.registerDispatch()}return n(e,[{key:"loadTemplateEnv",value:function(){void 0===this.loadState(this.loadCurrentState()).env&&("local"===this.loadCurrentState()||"undefined"===this.loadCurrentState()?this.saveState({env:"local MongoDB"},"local"):this.saveState({env:"Atlas (Cloud) v. 3.6"},"cloud"))}},{key:"loadState",value:function(e){return"cloud"===e?JSON.parse(window.localStorage.getItem("uriwriter_atlas"))||{}:JSON.parse(window.localStorage.getItem("uriwriter_local"))||{}}},{key:"saveState",value:function(e,t){"cloud"===t?window.localStorage.setItem("uriwriter_atlas",JSON.stringify(e)):window.localStorage.setItem("uriwriter_local",JSON.stringify(e))}},{key:"loadCurrentState",value:function(){return window.localStorage.getItem("uriwriter_currentstate")}},{key:"saveCurrentState",value:function(e){window.localStorage.setItem("uriwriter_currentstate",e)}},{key:"addValue",value:function(e,t){var n=this.loadState(this.loadCurrentState());"atlaspasteduri"!==e&&"env"!==e&&delete n.atlaspasteduri,n[e]=t,this.saveState(n,this.loadCurrentState())}},{key:"setupURIListeners",value:function(){!function(){for(var e=document.getElementsByTagName("pre"),t=0;t<e.length;t+=1)e[t].innerHTML=e[t].innerHTML.replace(pt,'<span class="uristring-element">$&</span>')}();for(var e=document.getElementsByClassName("uristring-element"),t=0;t<e.length;t+=1)e[t].innerHTML.indexOf("&lt;URISTRING&gt;")>-1&&this.uristowrite.push(e[t]),e[t].innerHTML.indexOf("&lt;USERNAME&gt;")>-1&&this.usernamestowrite.push(e[t]),e[t].innerHTML.indexOf("&lt;URISTRING_SHELL&gt;")>-1&&this.uristowriteshell.push(e[t]),e[t].innerHTML.indexOf("&lt;URISTRING_SHELL_NOUSER&gt;")>-1&&this.uristowritepasswordredactedshell.push(e[t])}},{key:"writeToPlaceholders",value:function(){for(var e=0;e<this.uristowrite.length;e+=1){var t="'"===(n=this.uristowrite[e].innerHTML).charAt(0)||'"'===n.charAt(0)?n.charAt(0):"";this.uristowrite[e].innerHTML=""+t+this.urireplacestring+t}for(var n,r=0;r<this.uristowritepasswordredactedshell.length;r+=1)this.uristowritepasswordredactedshell[r].innerHTML=this.urireplacestringPasswordRedactedShell;for(var a=0;a<this.uristowriteshell.length;a+=1)this.uristowriteshell[a].innerHTML=this.urireplacestringShell;for(var o=0;o<this.usernamestowrite.length;o+=1)this.usernamestowrite[o].innerHTML=this.username}},{key:"setEnvironment",value:function(e){var t=e.startsWith("Atlas (Cloud)");t?this.saveCurrentState("cloud"):this.saveCurrentState("local");var n=this.loadState(this.loadCurrentState()),r=Boolean(document.getElementById("uriwriter"));if(t&&r&&(document.getElementsByClassName("atlascontrols__status")[0].style.display="none",void 0!==n.atlaspasteduri))return this.parseIncomingAtlasString(n.atlaspasteduri),this.renderURI(),void this.populateForm();(void 0!==n&&void 0!==n.env&&n.env.startsWith("Atlas (Cloud)")||t)&&r&&this.hostList.updateHostsFromUriWriter(),this.addValue("env",e),this.renderURI(),r&&this.populateForm()}},{key:"toggleEnvironmentExternal",value:function(e){var t=document.getElementById("deployment_type");t.style.display="cloud"===e?"none":"block"}},{key:"setupEnvironmentListeners",value:function(){var e=this,t=document.getElementsByClassName("uriwriter__toggle"),n=this.loadState(this.loadCurrentState()).env;"Atlas (Cloud) v. 3.6"!==n&&"Atlas (Cloud) v. 3.4"!==n||(n="Atlas (Cloud)");for(var r=0;r<t.length;r+=1)n===t[r].innerHTML&&t[r].classList.add("guide__pill--active"),t[r].onclick=function(t){for(var n=t.target,r=n.parentElement.children,a=0;a<r.length;a+=1)r[a].classList.remove("guide__pill--active");n.classList.add("guide__pill--active"),e.setEnvironment(n.innerHTML)}}},{key:"renderURI",value:function(){"Atlas (Cloud)"===this.loadState(this.loadCurrentState()).env&&this.addValue("env","Atlas (Cloud) v. 3.6");var e=ct[this.loadState(this.loadCurrentState()).env];e&&(this.uristring=e.template,this.options=e.options,this.urireplacestring=this.replaceString(this.uristring,"&"),this.urireplacestringShell=this.replaceString(e.templateShell,","),this.urireplacestringPasswordRedactedShell=this.replaceString(e.templatePasswordRedactedShell,","),this.username=this.loadState(this.loadCurrentState()).username,this.writeToPlaceholders())}},{key:"optionStringifier",value:function(e,t){for(var n=[],r=this.loadState(this.loadCurrentState()),a=0;a<this.options.length;a+=1){var o=this.options[a],i=o.name,s=dt(r[i],o);s||(s=o.placeholder?o.placeholder:"$["+i+"]"),n.push(i+"="+s)}return n.join(t)}},{key:"replaceString",value:function(e,t){var n=this.loadState(this.loadCurrentState());n.username&&(e=e.replace("$[username]",n.username)),n.database&&(e=e.replace("$[database]",n.database)),n.authSource&&(e=e.replace("$[authSource]",n.authSource)),n.replicaSet&&(e=e.replace("$[replicaSet]",n.replicaSet));var r=this.optionStringifier(this.options,t);return r.length>0&&(e=e.replace("$[options]",r)),n.hostlist&&n.hostlist.length>0&&(e=e.replace("$[hostlist]",n.hostlist.join(","))),e}},{key:"renderOptions",value:function(){for(var e=document.getElementsByClassName("uriwriter__option-prompt");e.length>0;)e[0].parentElement.removeChild(e[0]);if(this.options&&this.options.length>0)for(var t=0;t<this.options.length;t+=1)"pass-through"!==this.options[t].type&&this.renderOption(this.options[t])}},{key:"renderOption",value:function(e){var t=this,n=document.createElement("label");n.className="mongodb-form__prompt uriwriter__option-prompt";var r=document.createElement("div");r.className="mongodb-form__label",r.innerText=e.name;var a=document.createElement("input");a.setAttribute("id",e.name),e.placeholder&&a.setAttribute("placeholder",e.placeholder),a.className="mongodb-form__input",void 0!==this.loadState(this.loadCurrentState())[e.name]&&(a.value=this.loadState(this.loadCurrentState())[e.name]),a.addEventListener("input",function(n){t.addValue(e.name,document.getElementById(e.name).value),t.renderURI()}),n.appendChild(r),n.appendChild(a);var o=document.querySelector("[data-server-configuration]");o.parentElement.insertBefore(n,o)}},{key:"initializeWidget",value:function(){var e=this;if(document.getElementById("uriwriter")){this.hostList=new ht(document.getElementById("hostlist"),this),document.getElementById("uriwriter_username").addEventListener("input",function(t){e.addValue("username",t.target.value),e.renderURI()});var t=document.getElementById("uriwriter_atlaspaste"),n=document.getElementsByClassName("atlascontrols__status")[0];t.oninput=function(r){var a=t.value;if(!a.trim())return n.style.display="none",void t.setCustomValidity("");e.parseIncomingAtlasString(a)?(t.setCustomValidity(""),e.addValue("atlaspasteduri",a),function(e){e.classList.add("mongodb-form__status--good"),e.classList.remove("mongodb-form__status--invalid"),e.style.display="",e.innerText="Connection string parsed"}(n),e.renderURI(),e.populateForm()):(t.setCustomValidity("Failed to parse"),function(e){e.classList.add("mongodb-form__status--invalid"),e.classList.remove("mongodb-form__status--good"),e.style.display="",e.innerText="Connection string could not be parsed"}(n))},document.getElementById("uriwriter_db").addEventListener("input",function(t){e.addValue("database",document.getElementById("uriwriter_db").value),e.renderURI()}),this.setupEnvironmentListeners(),this.populateForm()}}},{key:"renderFormValues",value:function(){var e=this.loadState(this.loadCurrentState()),t=document.getElementsByClassName("uriwriter__atlascontrols")[0];if("local MongoDB"!==e.env&&"local MongoDB with replica set"!==e.env)return document.getElementById("uriwriter_atlaspaste").value=e.atlaspasteduri||"",void 0!==e.atlaspasteduri?t.style.display="":t.style.display="none",document.getElementById("userinfo_form").style.display="none",void(t.style.display="");t.style.display="none",document.getElementById("userinfo_form").style.display="",void 0!==e.username&&(document.getElementById("uriwriter_username").value=e.username),void 0!==e.database&&(document.getElementById("uriwriter_db").value=e.database)}},{key:"setHosts",value:function(e){var t=this.loadState(this.loadCurrentState());t.hostlist=e,this.saveState(t,this.loadCurrentState()),this.renderURI()}},{key:"populateForm",value:function(){this.toggleEnvironmentExternal(this.loadCurrentState()),this.renderOptions(),this.renderFormValues(),this.hostList=new ht(document.getElementById("hostlist"),this)}},{key:"registerDispatch",value:function(){var e=this;ye.listen(function(t){if(mt&&(e.renderURI(),"cloud"===t.type)){if("cloud"===t.tabId){if("cloud"===e.loadCurrentState())return;e.saveCurrentState("cloud"),e.loadTemplateEnv(),e.renderURI()}else{if("local"===e.loadCurrentState())return;e.saveCurrentState("local"),e.loadTemplateEnv(),e.renderURI()}Boolean(document.getElementById("uriwriter"))&&e.populateForm()}})}},{key:"parseOutShellParams",value:function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].startsWith("--")&&!e[n+1].startsWith("--")){var r=e[n].replace("--",""),a=e[n+1];"authenticationDatabase"===r&&(r="authSource"),a.startsWith("--")||(a=a.replace("<","").replace(">",""),t[r]=a)}}},{key:"parseOutURIParams",value:function(e,t){for(var n=e.split("&"),r=0;r<n.length;r+=1){var a=n[r].split("=");t[a[0]]=a[1]}}},{key:"parseOutEnvAndClusters",value:function(e,t){var n=/(\w+):\/\/((\S+)(:)+(\S+))\/(\w+)?\?(\S+)/;e.startsWith("mongodb+srv")&&(n=/((\w+)\+(\w+)):\/\/((\S+))\/(\w+)/);var r=e.match(n);if("mongodb"===r[1]){t.env="Atlas (Cloud) v. 3.4";var a=r[2];t.hostlist=a.split(","),this.parseOutURIParams(r[7],t)}else t.env="Atlas (Cloud) v. 3.6",t.hostlist=[r[4]];t.database=r[6]}},{key:"parseShell",value:function(e,t){var n=e.split(" "),r=n[1];return r=r.replace(/"/g,""),this.parseOutShellParams(n,t),this.parseOutEnvAndClusters(r,t),this.saveState(t,"cloud"),!0}},{key:"parseIncomingAtlasString",value:function(e){if(void 0===e)return!1;if(null!==(e=e.replace(/[\n\r]+/g,"").trim())){var t=this.parseAtlasString(e);return this.hostList.updateHostsFromUriWriter(),t}return!1}},{key:"parseTo3dot4",value:function(e,t){t.env="Atlas (Cloud) v. 3.4",this.saveState(t,"cloud"),t=this.loadState(this.loadCurrentState());var n=e.match(/(\S+):\/\/(\S+):(\S*)@(\S+)\/(\S+)\?(\S+)/);return!!n&&(t.username=n[2],t.hostlist=n[4].split(","),t.database=n[5],function(e,t){var n=t.split("&");if(n.length>0)for(var r=0;r<n.length;r+=1){var a=n[r].split("=");e[a[0]]=a[1]}}(t,n[6]),this.saveState(t,this.loadCurrentState()),!0)}},{key:"parseTo3dot6",value:function(e,t){t.env="Atlas (Cloud) v. 3.6",this.saveState(t,"cloud"),t=this.loadState(this.loadCurrentState());var n=e.match(/(\S+):\/\/(\S+):(\S*)@(\S+)\/([^\s?]+)\?/);return!!n&&(t.username=n[2],t.havePassword=Boolean(n[3]),t.hostlist=[n[4]],t.database=n[5],this.saveState(t,this.loadCurrentState()),!0)}},{key:"parseAtlasString",value:function(e){var t=this.loadState("true");return e.indexOf(" --")>-1?this.parseShell(e,t):e.startsWith("mongodb+srv")?this.parseTo3dot6(e,t):this.parseTo3dot4(e,t)}}]),e}();var vt=Object.freeze({setup:function(){(mt=new ft).initializeWidget()}});var gt=Object.freeze({setup:function(){$(".version-selector").on("click",function(e){e.preventDefault();var t=$(e.currentTarget).data("path");window.location.href=function(e){var t=document.getElementsByClassName("body")[0].getAttribute("data-pagename");return"index"===t?t="":t&&(t+="/"),"/"+e+"/"+t}(t)})}}),yt=new(function(){function e(){t(this,e),this.components=[]}return n(e,[{key:"register",value:function(e){this.components.push(e),e.init&&e.init()}},{key:"update",value:function(){for(var e=0,t=this.components,n=t.length;e<n;e++){t[e].setup(this)}}}]),e}());$(function(){jQuery.fn.load=function(e){$(window).on("load",e)},et(),yt.register(b),yt.register(C),yt.register(E),yt.register(ge),yt.register(Re),yt.register(Fe),yt.register(Qe),yt.register(Ve),yt.register(Ce),yt.register(gt),yt.register(tt),yt.register(Te),yt.register(Me),yt.register(vt),yt.register(ut),yt.register(g),yt.register(v),$(".toc > ul > li > ul > li").length||$(".right-column .toc").hide(),$(".expand-toc-icon").on("click",function(e){e.preventDefault(),$(".sidebar").toggleClass("reveal")});var e=$(window),t=$(".sidebar"),n=e.width()<=1093;function r(){location.hash&&document.getElementById(location.hash.substr(1))&&$(window).scrollTop(window.scrollY-75)}if(e.resize(function(r){n&&e.width()>1093?(n=!1,t.removeClass("reveal")):!n&&e.width()<=1093&&(n=!0)}),window.addEventListener("hashchange",r),location.hash&&window.setTimeout(r,10),$(".content").on("click","a",function(e){$(e.currentTarget).attr("href")===location.hash&&window.setTimeout(r,10)}),yt.update(),document.querySelector){var a=document.querySelector("a.current");a&&a.scrollIntoView(!1)}})}();
//# sourceMappingURL=controller.js.map
