!function(){"use strict";var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,n,a){return n&&t(e.prototype,n),a&&t(e,a),e}}(),a=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},r=function(){return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!e||n.length!==e);a=!0);}catch(t){r=!0,i=t}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)};function o(t){return!t.siblings("ul:not(.simple)").length}function s(t){for(var e=[],n=0;n<t.length;n+=1)e.push(t[n]);return e}function l(t){var e=window.docsExcludedNav;if(!e||!e.length)return!1;for(var n=0;n<e.length;n+=1)if(-1!==t[0].href.indexOf(e[n]))return!0;return!1}function u(t,e){try{window.analytics.track(t,e)}catch(e){console.error("Error reporting analytics: "+t,e)}}var c=function(){function t(){e(this,t),this.listeners=[]}return n(t,[{key:"listen",value:function(t){this.listeners.push(t)}},{key:"dispatch",value:function(t){for(var e=0;e<this.listeners.length;e+=1)this.listeners[e](t)}}]),t}(),d="accordion--collapsed";function h(t){t.classList.toggle(d);var e=t.querySelector(".accordion__action");e.innerHTML="Expand"===e.innerHTML?"Collapse":"Expand",u("Accordion Toggled",{title:t.querySelector(".accordion__title").innerText,status:t.classList.contains(d)?"collapsed":"expanded"})}var p=Object.freeze({setup:function(){for(var t=document.getElementsByClassName("accordion"),e=0;e<t.length;e+=1){var n=t[e];n.querySelector(".accordion__button").addEventListener("click",h.bind(this,n))}}});var f=Object.freeze({setup:function(){var t=document.getElementById("showNav");t&&(t.onclick=function(){document.getElementById("sphinxsidebar").style.display="block",document.getElementById("left-column").style.display="flex",document.getElementById("showNav").style.display="none"});var e=document.getElementById("closeNav");e&&(e.onclick=function(){document.getElementById("showNav").style.display="flex",document.getElementById("left-column").style.display="none"})}});function m(t){!function(t){return Boolean(t.getElementsByClassName("linenos").length)}(t)?function(t){return Boolean(t.getElementsByClassName("caption-text").length)}(t)&&function(t){var e=t.getElementsByClassName("button-row")[0],n=t.getElementsByClassName("code-block-caption")[0];console.log("MOVING BELOW CAPTION"),n.parentNode.insertBefore(e,n.nextSibling)}(t):function(t){var e=t.getElementsByClassName("button-row")[0],n=t.getElementsByClassName("highlighttable")[0].childNodes[0],a=document.createElement("tr"),r=document.createElement("td"),i=document.createElement("td");r.className="linenos-button-row-spacer",n.insertBefore(a,n.firstChild),a.appendChild(r),a.appendChild(i),i.appendChild(e)}(t)}var v=Object.freeze({setup:function(){var t=document.getElementsByClassName("button-code-block"),e=!0,n=!1,a=void 0;try{for(var r,i=t[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;Boolean(o.getElementsByClassName("button-row")[0])&&m(o)}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}}}),g="code-button__tooltip--active",y="code-button__tooltip--inactive";function b(t){return Boolean(t.getElementsByClassName("copyable-code-block")[0])}var w=Object.freeze({setup:function(){var e=s(document.getElementsByClassName("button-code-block")).filter(b),n=function(t){var e=t.getElementsByClassName("highlight")[0];if(!e)return{v:void 0};var n=t.getElementsByClassName("button-row")[0].getElementsByClassName("code-button--copy")[0];if(!n)return{v:void 0};var a=document.createElement("div");a.innerText="copied",a.classList.add("code-button__tooltip"),a.classList.add(y);var r=-1;n.appendChild(a),n.addEventListener("click",function(){var t=document.createElement("textarea");t.style.position="fixed",document.body.appendChild(t);var n,i,o,s=e.innerText.trim();t.value=s,t.select();try{if(!document.execCommand("copy"))throw new Error("Failed to copy");a.classList.replace(y,g),n=function(){a.classList.replace(g,y)},o=1500,(i=r)>=0&&window.clearTimeout(i),r=window.setTimeout(n,o)}catch(t){console.error(t)}document.body.removeChild(t),u("Codeblock Copied",{code:s})})},a=!0,r=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=n(o.value);if("object"===(void 0===c?"undefined":t(c)))return c.v}}catch(t){r=!0,i=t}finally{try{!a&&l.return&&l.return()}finally{if(r)throw i}}}});var S=Object.freeze({setup:function(t){if(void 0===window.history||void 0===document.querySelectorAll||void 0===document.body.classList||void 0===(new XMLHttpRequest).responseURL)return!1;var e=document.querySelector(".sphinxsidebarwrapper"),n=document.querySelector(".body"),a={};function r(){void 0!==a.timeoutID&&window.clearTimeout(a.timeoutID),void 0!==a.xhr&&a.xhr.abort(),a={}}function i(i,o){void 0===i&&console.error("Going to undefined path"),r(),n.classList.add("loading"),a.timeoutID=window.setTimeout(function(){n.classList.remove("loading"),a.timeoutID=-1},1e4);var s=new Date;a.xhr=function(t,e){var n=new XMLHttpRequest;n.onload=function(){n.status>=200&&n.status<400?(e.success(n.responseText,n.responseURL),e.complete()):(e.error(),e.complete())},n.onerror=function(){e.error(),e.complete()},n.open("GET",t,!0);try{n.send()}catch(t){e.error(),e.complete()}}(i,{complete:function(){r()},error:function(t){console.error("Failed to load "+i),window.location=i},success:function(a,r){var i=new Date-s;n.classList.remove("loading"),o&&window.history.pushState({href:r},"",r);var l=document.createElement("html");l.innerHTML=a;var u=l.querySelector("title").textContent,c=l.querySelector(".body"),d=l.querySelector(".sphinxsidebarwrapper");i>62.5&&c.classList.add("loading"),n.parentElement.replaceChild(c,n),n=c,e.parentElement.replaceChild(d,e),e=d,document.title=u,t.update(),window.history.onnavigate&&window.history.onnavigate(),window.setTimeout(function(){n.classList.remove("loading"),o&&window.scroll(0,0)},1)}})}window.history.replaceState({href:window.location.href},document.querySelector("title").textContent,window.location.href);var s=document.querySelectorAll(".sphinxsidebarwrapper > ul a.reference.internal");function u(t){0!==t.button||t.shiftKey||t.altKey||t.metaKey||t.ctrlKey||(t.preventDefault(),i(t.currentTarget.href,!0))}for(var c=0;c<s.length;c+=1){var d=s[c];(o($(d))||l($(d)))&&d.addEventListener("click",u)}return window.onpopstate=function(t){null!==t.state&&i(t.state.href,!1)},!0}});function _(){}function C(t,e){for(var n in e)t[n]=e[n];return t}function E(t,e){e.appendChild(t)}function k(t,e,n){e.insertBefore(t,n)}function x(t){t.parentNode.removeChild(t)}function I(t){return document.createElement(t)}function N(t){return document.createTextNode(t)}function L(t,e,n){t.addEventListener(e,n,!1)}function T(t,e,n){t.removeEventListener(e,n,!1)}function B(t){this.destroy=_,this.fire("destroy"),this.set=this.get=_,!1!==t&&this._fragment.u(),this._fragment.d(),this._fragment=this._state=null}function A(t,e){t._handlers=Object.create(null),t._bind=e._bind,t.options=e,t.root=e.root||t,t.store=t.root.store||e.store}function j(t){for(;t&&t.length;)t.shift()()}var O={destroy:B,get:function(t){return t?this._state[t]:this._state},fire:function(t,e){var n=t in this._handlers&&this._handlers[t].slice();if(n)for(var a=0;a<n.length;a+=1){var r=n[a];r.__calling||(r.__calling=!0,r.call(this,e),r.__calling=!1)}},observe:function(t,e,n){var a=e.bind(this);return n&&!1===n.init||a(this.get()[t],void 0),this.on(n&&n.defer?"update":"state",function(e){e.changed[t]&&a(e.current[t],e.previous&&e.previous[t])})},on:function(t,e){if("teardown"===t)return this.on("destroy",e);var n=this._handlers[t]||(this._handlers[t]=[]);return n.push(e),{cancel:function(){var t=n.indexOf(e);~t&&n.splice(t,1)}}},set:function(t){this._set(C({},t)),this.root._lock||(this.root._lock=!0,j(this.root._beforecreate),j(this.root._oncreate),j(this.root._aftercreate),this.root._lock=!1)},teardown:B,_recompute:_,_set:function(t){var e=this._state,n={},a=!1;for(var r in t)this._differs(t[r],e[r])&&(n[r]=a=!0);a&&(this._state=C(C({},e),t),this._recompute(n,this._state),this._bind&&this._bind(n,this._state),this._fragment&&(this.fire("state",{changed:n,current:this._state,previous:e}),this._fragment.p(n,this._state),this.fire("update",{changed:n,current:this._state,previous:e})))},_mount:function(t,e){this._fragment[this._fragment.i?"i":"m"](t,e||null)},_unmount:function(){this._fragment&&this._fragment.u()},_differs:function(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}};function q(t){A(this,t),this._state=C({name:"",caption:"",answer:null},t.data),this._recompute({answer:1},this._state),this._fragment=function(t,e){var n,a,r,i,o,s,l,u;function c(e){t.change(!0)}function d(e){t.change(!1)}return{c:function(){n=I("div"),a=N("\n"),r=I("div"),i=I("span"),s=N("\n    "),l=I("span"),this.h()},h:function(){L(i,"click",c),i.className=o="switch fa fa-thumbs-up good "+e.upvoteSelected,L(l,"click",d),l.className=u="switch fa fa-thumbs-down bad "+e.downvoteSelected},m:function(t,o){k(n,t,o),n.innerHTML=e.caption,k(a,t,o),k(r,t,o),E(i,r),E(s,r),E(l,r)},p:function(t,e){t.caption&&(n.innerHTML=e.caption),t.upvoteSelected&&o!==(o="switch fa fa-thumbs-up good "+e.upvoteSelected)&&(i.className=o),t.downvoteSelected&&u!==(u="switch fa fa-thumbs-down bad "+e.downvoteSelected)&&(l.className=u)},u:function(){n.innerHTML="",x(n),x(a),x(r)},d:function(){T(i,"click",c),T(l,"click",d)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}C(q.prototype,O),C(q.prototype,{change:function(t){this.set({answer:t}),this.fire("change",t)}}),q.prototype._recompute=function(t,e){t.answer&&(this._differs(e.upvoteSelected,e.upvoteSelected=!0===e.answer?"selected":"")&&(t.upvoteSelected=!0),this._differs(e.downvoteSelected,e.downvoteSelected=function(t){return!1===t?"selected":""}(e.answer))&&(t.downvoteSelected=!0))};function H(t){A(this,t),this._state=C({name:"",caption:"",answer:""},t.data),this._fragment=function(t,e){var n,a=!1;function r(){a=!0,t.set({answer:n.value}),a=!1}function i(e){var n=t.get();t.fire("change",n.answer)}return{c:function(){n=I("textarea"),this.h()},h:function(){L(n,"input",r),L(n,"input",i),n.placeholder=e.caption},m:function(t,a){k(n,t,a),n.value=e.answer},p:function(t,e){a||(n.value=e.answer),t.caption&&(n.placeholder=e.caption)},u:function(){x(n)},d:function(){T(n,"input",r),T(n,"input",i)}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}function R(t){const e=document.createElement("script");e.type="application/javascript",e.src=t,document.body.appendChild(e)}C(H.prototype,O),C(H.prototype,{change:function(){this.fire("change",this.get("answer"))}});var P={open:function(){"Initial"===this.get("state")&&(this.set({answers:{}}),this.set({state:"NotVoted"}))},toggle:function(){this.set({answers:{}}),"Initial"===this.get("state")?this.set({state:"NotVoted"}):this.set({state:"Initial"})},submit:function(){const t=this.get("state");if("boolean"!=typeof t)throw new Error("Assertion failed: Feedback submitted without vote");const e={},n=this.get("answers");for(const t of Object.keys(n)){const a=n[t];null!=a&&(e[t]=a)}this.set({state:"Pending"}),this.fire("submit",{vote:t,fields:e})},rate:function(t){this.set({state:t})},addQuestion:function(t,e,n){return this.set({questions:this.get("questions").concat({type:t,name:e,caption:n})}),this},update:function(t,e){this.get("answers")[t]=e},showCollectorDialog:function(){if(window.ATL_JQ_PAGE_PROPS={triggerFunction:function(t){window.setTimeout(()=>t(),1)},fieldValues:{summary:`Comment on: "${this.get("project")}/${this.get("pagename")}"`}},window.jQuery)R(this.get("jiraurl"));else{const t=document.createElement("script");t.type="application/javascript",t.integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=",t.setAttribute("crossorigin","anonymous"),t.src="https://code.jquery.com/jquery-2.2.4.min.js",t.onload=(()=>{R(this.get("jiraurl"))}),document.body.appendChild(t)}}};function U(t,e){var n;return{c:function(){n=I("span"),this.h()},h:function(){n.className="fa fa-comments deluge-comment-icon"},m:function(t,e){k(n,t,e)},u:function(){x(n)},d:_}}function M(t,e){var n;return{c:function(){n=I("span"),this.h()},h:function(){n.className="fa fa-angle-down deluge-close-icon"},m:function(t,e){k(n,t,e)},u:function(){x(n)},d:_}}function D(t,e){var n;return{c:function(){(n=I("p")).textContent="Thank you for your feedback!"},m:function(t,e){k(n,t,e)},u:function(){x(n)},d:_}}function V(t,e){var n;return{c:function(){(n=I("li")).textContent="We're sorry! Please help us improve this page."},m:function(t,e){k(n,t,e)},u:function(){x(n)},d:_}}function W(t,e){var n,a=e.question;e.each_value,e.question_index;function r(t){return"binary"===a.type?F:"freeform"===a.type?z:null}var i=r(),o=i&&i(t,e);return{c:function(){n=I("li"),o&&o.c()},m:function(t,e){k(n,t,e),o&&o.m(n,null)},p:function(e,s){a=s.question,s.each_value,s.question_index,i===(i=r())&&o?o.p(e,s):(o&&(o.u(),o.d()),(o=i&&i(t,s))&&o.c(),o&&o.m(n,null))},u:function(){x(n),o&&o.u()},d:function(){o&&o.d()}}}function F(t,e){var n=e.question,a=(e.each_value,e.question_index,{name:n.name,caption:n.caption}),r=new q({root:t.root,data:a});return r.on("change",function(e){t.update(n.name,e)}),{c:function(){r._fragment.c()},m:function(t,e){r._mount(t,e)},p:function(t,e){n=e.question,e.each_value,e.question_index;var a={};t.questions&&(a.name=n.name),t.questions&&(a.caption=n.caption),r._set(a)},u:function(){r._unmount()},d:function(){r.destroy(!1)}}}function z(t,e){var n=e.question,a=(e.each_value,e.question_index,{name:n.name,caption:n.caption}),r=new H({root:t.root,data:a});return r.on("change",function(e){t.update(n.name,e)}),{c:function(){r._fragment.c()},m:function(t,e){r._mount(t,e)},p:function(t,e){n=e.question,e.each_value,e.question_index;var a={};t.questions&&(a.name=n.name),t.questions&&(a.caption=n.caption),r._set(a)},u:function(){r._unmount()},d:function(){r.destroy(!1)}}}function Q(t,e){var n,a,r,i;function o(e){t.showCollectorDialog()}return{c:function(){n=I("p"),a=N("If this page contains an error, you may "),(r=I("a")).textContent="report the problem on Jira.",this.h()},h:function(){L(r,"click",o),r.className="deluge-fix-button jira-link jirafeedback",r.target="_blank",r.title=i="Report a problem with "+e.pagename+" on Jira"},m:function(t,e){k(n,t,e),E(a,n),E(r,n)},p:function(t,e){t.pagename&&i!==(i="Report a problem with "+e.pagename+" on Jira")&&(r.title=i)},u:function(){x(n)},d:function(){T(r,"click",o)}}}function G(t,e){var n;return{c:function(){(n=I("p")).textContent="Submitting feedback..."},m:function(t,e){k(n,t,e)},p:_,u:function(){x(n)},d:_}}function J(t,e){var n,a,r;function i(e){t.rate(!0)}function o(e){t.rate(!1)}return{c:function(){(n=I("a")).textContent="Yes",a=N("\n        "),(r=I("a")).textContent="No",this.h()},h:function(){L(n,"click",i),n.id="rate-up",n.className="deluge-vote-button",L(r,"click",o),r.id="rate-down",r.className="deluge-vote-button"},m:function(t,e){k(n,t,e),k(a,t,e),k(r,t,e)},p:_,u:function(){x(n),x(a),x(r)},d:function(){T(n,"click",i),T(r,"click",o)}}}function X(t,e){for(var n,a,r,i,o,s,l,u,c=!1===e.state&&V(),d=e.questions,h=[],p=0;p<d.length;p+=1)h[p]=W(t,C(C({},e),{each_value:d,question:d[p],question_index:p}));function f(e){t.toggle()}function m(e){t.submit()}return{c:function(){n=I("div"),a=I("ul"),c&&c.c(),r=document.createComment("");for(var t=0;t<h.length;t+=1)h[t].c();i=N("\n\n            "),o=I("div"),(s=I("button")).textContent="Cancel",l=N("\n                "),(u=I("button")).textContent="Submit",this.h()},h:function(){var t,e;t="ref",e=!0,a.setAttribute(t,e),L(s,"click",f),L(u,"click",m),u.className="primary",o.className="deluge-button-group",n.className="deluge-questions"},m:function(t,e){k(n,t,e),E(a,n),c&&c.m(a,null),E(r,a);for(var d=0;d<h.length;d+=1)h[d].m(a,null);E(i,n),E(o,n),E(s,o),E(l,o),E(u,o)},p:function(e,n){!1===n.state?c||((c=V()).c(),c.m(a,r)):c&&(c.u(),c.d(),c=null);var i=n.questions;if(e.questions){for(var o=0;o<i.length;o+=1){var s=C(C({},n),{each_value:i,question:i[o],question_index:o});h[o]?h[o].p(e,s):(h[o]=W(t,s),h[o].c(),h[o].m(a,null))}for(;o<h.length;o+=1)h[o].u(),h[o].d();h.length=i.length}},u:function(){x(n),c&&c.u();for(var t=0;t<h.length;t+=1)h[t].u()},d:function(){c&&c.d(),function(t){for(var e=0;e<t.length;e+=1)t[e]&&t[e].d()}(h),T(s,"click",f),T(u,"click",m)}}}function K(t){A(this,t),this._state=C({project:"",pagename:"",state:"Initial",jiraurl:"https://jira.mongodb.org/s/en_UScn8g8x/782/6/1.2.5/_/download/batch/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs/com.atlassian.jira.collector.plugin.jira-issue-collector-plugin:issuecollector-embededjs.js?collectorId=298ba4e7",questions:[],answers:{}},t.data),this._recompute({state:1},this._state),t.root||(this._oncreate=[],this._beforecreate=[],this._aftercreate=[]),this._fragment=function(t,e){var n,a,r,i,o,s,l,u,c="Initial"===e.state&&U(),d="Initial"!==e.state&&M();function h(e){t.toggle()}var p=("Voted-Up"===e.state||"Voted-Down"===e.state)&&D();function f(t){return"Voted-Down"===t.state?Q:"Pending "==t.state?G:"NotVoted"===t.state?J:"boolean"==typeof t.state?X:null}var m=f(e),v=m&&m(t,e);return{c:function(){n=I("div"),a=I("div"),c&&c.c(),r=N("\n\n        "),(i=I("span")).textContent="Was this page helpful?",o=N("\n\n    "),d&&d.c(),s=N("\n\n    "),l=I("div"),p&&p.c(),u=N("\n\n    "),v&&v.c(),this.h()},h:function(){i.className="deluge-helpful",L(a,"click",h),a.className=e.delugeHeaderClass,l.className=e.delugeBodyClass,n.className=e.delugeClass},m:function(t,e){k(n,t,e),E(a,n),c&&c.m(a,null),E(r,a),E(i,a),E(o,a),d&&d.m(a,null),E(s,n),E(l,n),p&&p.m(l,null),E(u,l),v&&v.m(l,null)},p:function(e,i){"Initial"===i.state?c||((c=U()).c(),c.m(a,r)):c&&(c.u(),c.d(),c=null),"Initial"!==i.state?d||((d=M()).c(),d.m(a,null)):d&&(d.u(),d.d(),d=null),e.delugeHeaderClass&&(a.className=i.delugeHeaderClass),"Voted-Up"===i.state||"Voted-Down"===i.state?p||((p=D()).c(),p.m(l,u)):p&&(p.u(),p.d(),p=null),m===(m=f(i))&&v?v.p(e,i):(v&&(v.u(),v.d()),(v=m&&m(t,i))&&v.c(),v&&v.m(l,null)),e.delugeBodyClass&&(l.className=i.delugeBodyClass),e.delugeClass&&(n.className=i.delugeClass)},u:function(){x(n),c&&c.u(),d&&d.u(),p&&p.u(),v&&v.u()},d:function(){c&&c.d(),d&&d.d(),T(a,"click",h),p&&p.d(),v&&v.d()}}}(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor),this._lock=!0,j(this._beforecreate),j(this._oncreate),j(this._aftercreate),this._lock=!1)}C(K.prototype,O),C(K.prototype,P),K.prototype._recompute=function(t,e){t.state&&(this._differs(e.delugeClass,e.delugeClass=function(t){return"Initial"===t?"deluge":"deluge deluge-expanded"}(e.state))&&(t.delugeClass=!0),this._differs(e.delugeHeaderClass,e.delugeHeaderClass=function(t){return"Initial"===t?"deluge-header":"deluge-header deluge-header-expanded"}(e.state))&&(t.delugeHeaderClass=!0),this._differs(e.delugeBodyClass,e.delugeBodyClass=function(t){return"Initial"===t?"deluge-body":"deluge-body deluge-body-expanded"}(e.state))&&(t.delugeBodyClass=!0))};const Y="http://deluge.us-east-1.elasticbeanstalk.com/";class Z{constructor(t,e,n){this.project=t,this.path=e,this.app=new K({target:n,data:{state:"Initial",project:t,pagename:e}}),this.app.on("submit",t=>{this.sendRating(t.vote,t.fields).then(()=>{t.vote?this.app.set({state:"Voted-Up"}):this.app.set({state:"Voted-Down"})}).catch(t=>{console.error("Error submitting feedback")})})}askQuestion(t,e){return this.app.addQuestion("binary",t,e),this}askFreeformQuestion(t,e){return this.app.addQuestion("freeform",t,e),this}sendRating(t,e){const n=`${this.project}/${this.path}`,a={useful:t};for(const t of Object.keys(e))a[t]=e[t];try{window.analytics.track("Feedback Submitted",a)}catch(t){console.error(t)}return new Promise((a,r)=>{e.v=t,e.p=n;const i=function(t,e){const n=[];for(const t of Object.keys(e)){const a=e[t];n.push(`${encodeURIComponent(t)}=${encodeURIComponent(JSON.stringify(a))}`)}return t+"?"+n.join("&")}(Y,e),o=new Image;o.onload=(()=>a()),o.onerror=(()=>r()),o.src=i})}open(){this.app.open()}}var tt=null,et={"meta/404":!0,search:!0};var nt=Object.freeze({init:function(){tt=document.body.getAttribute("data-project")},setup:function(){void 0!==window.localStorage&&function(){var t=document.getElementsByClassName("body");if(t.length){var e=t[0].getAttribute("data-pagename");if(!Object.prototype.hasOwnProperty.call(et,e)){var n=document.getElementById("rating-panel");n&&(n.innerText="",n&&new Z(tt,e,n).askFreeformQuestion("reason","What were you looking for?").askQuestion("findability","Did you find it?").askQuestion("accuracy","Was the information you found <strong>accurate</strong>?").askQuestion("clarity","Was the information <strong>clear</strong>?").askQuestion("fragmentation","Was the information you needed <strong>all on one page</strong>?"))}}}()}}),at=new c;function rt(){return JSON.parse(window.localStorage.getItem("tabPref"))||{}}function it(t,e){var n=rt();e?(n.pages||(n.pages={}),n.pages[window.location.pathname]=t.tabId):n[t.type]=t.tabId,window.localStorage.setItem("tabPref",JSON.stringify(n))}var ot={},st=function(){function t(n,a,r,i){e(this,t),this.type=n,this.tabStrips=r,this.tabContents=i,this.anonymous=a,this.tabIds={}}return n(t,[{key:"getFirstTabId",value:function(){var t=this.tabStrips[0].querySelector(".tab-strip__element[aria-selected=true]");return t?t.getAttribute("data-tabid"):null}},{key:"setup",value:function(){var t=this;if(0!==this.tabStrips.length){!function(){if(document.querySelector(".tabs-top")){var t=$(".tab-strip--singleton"),e=t.first();t.slice(1).detach(),e.detach().insertAfter("h1").first()}}();var e=!0,n=!1,a=void 0;try{for(var r,i=this.tabStrips[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,s=function(e){t.tabIds[e.getAttribute("data-tabid")]=!0,e.onclick=function(n){var a=e.getBoundingClientRect(),r=window.scrollY-a.y,i=n.target.getAttribute("data-tabid"),o={};if(o.tabId=i,o.type=t.type,i){t.update(i,!0);var s=e.getBoundingClientRect();window.scrollTo(s.x,s.y+r),u("Tab Selected",{tabId:i,title:n.target.innerText,tabSet:t.type}),n.preventDefault()}}},l=!0,c=!1,d=void 0;try{for(var h,p=o.querySelectorAll("[data-tabid]")[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){s(h.value)}}catch(t){c=!0,d=t}finally{try{!l&&p.return&&p.return()}finally{if(c)throw d}}}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}this.update(null,!1)}}},{key:"update",value:function(t,e){if(0!==this.tabStrips.length){if(!t){var n=rt();this.anonymous&&n.pages&&n.pages[window.location.pathname]?t=n.pages[window.location.pathname]:n[this.type]&&(t=n[this.type])}(t&&this.tabIds[t]||(t=this.getFirstTabId()))&&at.dispatch({isUserAction:e,tabId:t,type:this.type})}}},{key:"showHideSelectedTab",value:function(t){var e=!0,n=!1,a=void 0;try{for(var r,i=this.tabStrips[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,s=$(o.querySelector('[data-tabid="'+t+'"]'));if(s.length){var l=s.parent("ul"),u=$(o.querySelector(".dropdown-toggle")),c=$(o.querySelector(".dropdown"));l.hasClass("dropdown-menu")?(u.text(""+s.first().text()).append('<span class="caret"></span>'),c.attr("aria-selected",!0).siblings().attr("aria-selected",!1)):(s.attr("aria-selected",!0).siblings().attr("aria-selected",!1),u.text("Other ").append('<span class="caret"></span>'))}}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}var d="tabpanel-"+t,h=!0,p=!1,f=void 0;try{for(var m,v=this.tabContents[Symbol.iterator]();!(h=(m=v.next()).done);h=!0){var g=m.value,y=!0,b=!1,w=void 0;try{for(var S,_=g.children[Symbol.iterator]();!(y=(S=_.next()).done);y=!0){var C=S.value;C.classList.contains(d)?C.style.display="block":C.style.display="none"}}catch(t){b=!0,w=t}finally{try{!y&&_.return&&_.return()}finally{if(b)throw w}}}}catch(t){p=!0,f=t}finally{try{!h&&v.return&&v.return()}finally{if(p)throw f}}}}],[{key:"register",value:function(e){var n=s(e.getElementsByClassName("tab-strip--singleton")),a=e.querySelector(".tabs__content"),r=e.getAttribute("data-tab-preference"),i=!1;if(!r){var o=e.querySelector("[data-tabid]");if(!o)return;r="anonymous-"+o.getAttribute("data-tabid"),i=!0}if(ot[r]){var l=ot[r];return l.tabStrips=l.tabStrips.concat(n),void l.tabContents.push(a)}var u=new t(r,i,n,[a],!1);ot[r]=u}}]),t}();at.listen(function(t){var e=ot[t.type];e&&(t.isUserAction&&it(t,e.anonymous),e.showHideSelectedTab(t.tabId))});var lt=Object.freeze({tabsEventDispatcher:at,getTabPref:rt,setTabPref:it,setup:function(){ot={};for(var t=document.getElementsByClassName("tabs"),e=0;e<t.length;e+=1)st.register(t[e]);var n=!0,a=!1,r=void 0;try{for(var i,o=Object.keys(ot)[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;ot[s].setup()}}catch(t){a=!0,r=t}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}}}),ut=[];function ct(){var t=document.body.clientHeight-window.innerHeight,e=document.documentElement.scrollTop/t;e=(document.documentElement.scrollTop+.8*e*window.innerHeight)/t;var n=[1/0,null],a=!0,i=!1,o=void 0;try{for(var s,l=ut[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var u=s.value,c=r(u,2),d=c[0],h=c[1];h.classList.remove("active");var p=d.offsetTop/t,f=Math.abs(p-e);f<=n[0]&&(n=[f,h])}}catch(t){i=!0,o=t}finally{try{!a&&l.return&&l.return()}finally{if(i)throw o}}n[1]&&n[1].classList.add("active")}function dt(t){var e=t.target.getAttribute("data-tab-preference");e&&it({tabId:e,type:"languages"},!1)}document.addEventListener("scroll",function(t,e){var n=null,a=null,r=null,o=0;function s(){o=Date.now(),r=null,a=t.apply.apply(t,i(n)),r||(n=null)}return function(){for(var l=Date.now(),u=e-(l-o),c=arguments.length,d=Array(c),h=0;h<c;h++)d[h]=arguments[h];return n=d,u<=0||u>e?(r&&(window.clearTimeout(r),r=null),o=l,a=t.apply(void 0,i(n)),r||(n=null)):r||(r=window.setTimeout(s,u)),a}}(ct,150));var ht=document.getElementsByClassName("show-current-language");at.listen(function(t){if("languages"===t.type)for(var e=0;e<ht.length;e+=1)ht[e].innerText=t.tabId});var pt=Object.freeze({setup:function(){!function(){var t=document.querySelector(".left-toc");if(t){ut.length=0;var e=!0,n=!1,a=void 0;try{for(var r,i=t.querySelectorAll("a")[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value,s=o.getAttribute("href").slice(1);if(s){var l=document.getElementById(s);l&&ut.push([l,o.parentElement])}}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}ct()}}(),function(){var t=document.getElementsByClassName("guide-category-list")[0];if(t)for(var e=t.getElementsByClassName("guide__pill"),n=0;n<e.length;n+=1)e[n].onclick=dt}()}}),ft="lightbox__content--activated",mt="lightbox__content--scalable",vt=document.createElement("div");vt.className="lightbox__modal",vt.title="click to close";var gt=document.createElement("img");function yt(t){"keydown"===t.type&&"Escape"!==t.key||(gt.classList.remove(ft),vt.parentNode&&vt.parentNode.removeChild(vt))}function bt(t){var e=document.createElement("div"),n=document.createElement("div");e.className="lightbox__imageWrapper",n.className="lightbox__caption",n.innerText="click to enlarge",t.parentNode.replaceChild(e,t),e.appendChild(t),e.appendChild(n),e.addEventListener("click",function(){document.body.appendChild(vt),gt.src=t.src,gt.alt=t.alt+" â€” Enlarged",/\.svg$/.test(gt.src)?gt.classList.add(mt):gt.classList.remove(mt),vt.addEventListener("click",yt),setTimeout(function(){gt.classList.add(ft)},0)})}function wt(t,e){var n=e.naturalWidth*e.naturalHeight;e.clientWidth*e.clientHeight<.9*n&&(bt(e),t.classList.add("lightbox"))}gt.className="lightbox__content",vt.appendChild(gt);var St=Object.freeze({setup:function(){var t=!0,e=!1,n=void 0;try{for(var a,r=document.getElementsByClassName("lightbox")[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){var i=a.value;0!==i.children.length&&"IMG"===i.children[0].tagName&&bt(i.children[0])}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}var o=!0,s=!1,l=void 0;try{for(var u,c=document.getElementsByClassName("figure")[Symbol.iterator]();!(o=(u=c.next()).done);o=!0){var d=u.value;if(0!==d.children.length&&"IMG"===d.children[0].tagName&&!d.classList.contains("lightbox")){var h=d.children[0];h.complete?wt(d,h):h.addEventListener("load",wt.bind(null,d,h))}}}catch(t){s=!0,l=t}finally{try{!o&&c.return&&c.return()}finally{if(s)throw l}}document.addEventListener("keydown",yt)}}),_t="apiref-resource--collapsed";function Ct(t,e){var n=null;t.addEventListener("mousedown",function(t){0===t.button&&(n=t)}),t.addEventListener("mouseup",function(t){if(0===t.button){var a=n;n=null,(!a||Math.abs(t.clientX-a.clientX)<50&&Math.abs(t.clientY-a.clientY)<50)&&e()}})}function Et(t,e){if(e.id){var n="#"+e.id;window.history.pushState({href:n},"",n)}e.classList[t](_t)}function kt(){var t=document.location.hash.slice(1);if(t){var e=document.getElementById(t);e&&e.classList.contains("apiref-resource")&&Et("remove",e)}}window.addEventListener("hashchange",kt,!1);var xt=Object.freeze({setup:function(){for(var t=document.getElementsByClassName("apiref-resource__header"),e=0;e<t.length;e+=1){var n=t[e];Ct(n,Et.bind(null,"toggle",n.parentElement))}kt()}});function It(t,e){var n=e.target.getAttribute("data-tabid");at.dispatch({isUserAction:!0,tabId:n,type:t}),u("Pill Selected",{tabId:n,title:e.target.innerText,pillSet:t})}var Nt={};at.listen(function(t){var e=!0,n=!1,a=void 0;try{for(var r,i=(Nt[t.type]||[])[Symbol.iterator]();!(e=(r=i.next()).done);e=!0)for(var o=r.value.getElementsByClassName("guide__pill"),s=0;s<o.length;s+=1){o[s].getAttribute("data-tabid")===t.tabId?o[s].classList.add("guide__pill--active"):o[s].classList.remove("guide__pill--active")}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}});var Lt=Object.freeze({setup:function(){Nt={};var t=!0,e=!1,n=void 0;try{for(var a,i=document.querySelectorAll(".pillstrip-declaration")[Symbol.iterator]();!(t=(a=i.next()).done);t=!0){var o=a.value;(p=o.getAttribute("data-tab-preference"))&&(void 0===Nt[p]&&(Nt[p]=[]),Nt[p].push(o))}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}var l=!0,u=!1,c=void 0;try{for(var d,h=Object.keys(Nt)[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value,f=Nt[p],m=document.querySelectorAll('.tabs[data-tab-preference="'+p+'"] > .tab-strip'),v={},g=[],y=!0,b=!1,w=void 0;try{for(var S,_=m[Symbol.iterator]();!(y=(S=_.next()).done);y=!0){var C=S.value;C.style.display="none";var E=-1,k=s(C.querySelectorAll(".tab-strip__element[data-tabid]"));k=k.concat(s(C.querySelectorAll(".tab-strip__dropdown > li")));var x=!0,I=!1,N=void 0;try{for(var L,$=k[Symbol.iterator]();!(x=(L=$.next()).done);x=!0){var T=L.value;E+=1;var B=T.getAttribute("data-tabid");void 0===v[B]&&(v[B]=!0,g.splice(E,0,[B,T.innerText]))}}catch(t){I=!0,N=t}finally{try{!x&&$.return&&$.return()}finally{if(I)throw N}}}}catch(t){b=!0,w=t}finally{try{!y&&_.return&&_.return()}finally{if(b)throw w}}var A=It.bind(void 0,p),j=!0,O=!1,q=void 0;try{for(var H,R=f[Symbol.iterator]();!(j=(H=R.next()).done);j=!0){var P=H.value,U=!0,M=!1,D=void 0;try{for(var V,W=g[Symbol.iterator]();!(U=(V=W.next()).done);U=!0){var F=V.value,z=r(F,2),Q=z[0],G=z[1],J=document.createElement("li");J.className="guide__pill",J.setAttribute("data-tabid",Q),J.innerText=G,J.onclick=A,P.appendChild(J)}}catch(t){M=!0,D=t}finally{try{!U&&W.return&&W.return()}finally{if(M)throw D}}}}catch(t){O=!0,q=t}finally{try{!j&&R.return&&R.return()}finally{if(O)throw q}}}}catch(t){u=!0,c=t}finally{try{!l&&h.return&&h.return()}finally{if(u)throw c}}}});function $t(t){return t.hasClass("current")}var Tt=Object.freeze({setup:function(){var t=$(".sidebar a.current");(o(t)||l(t)||$t(t))&&t.parent("li").addClass("selected-item"),t.parents("ul").each(function(t,e){$(e).css("display","block")}),$(".sphinxsidebarwrapper > ul li:not(.current) > ul:not(.current)").hide(),$(".sphinxsidebarwrapper").show(),$(".sphinxsidebarwrapper .toctree-l1").on("click","a",function(e){var n=$(e.currentTarget);o(n)||!n.parent().hasClass("selected-item")&&l(n)||(e.preventDefault(),n.parent().hasClass("current")?(n.parent().removeClass("current selected-item"),n.siblings("ul").slideUp()):(t.parent().removeClass("selected-item"),t.parents().add(t.siblings("ul")).each(function(t,n){var a=$(n);a.has(e.currentTarget).length||(a.is("ul")?a.removeClass("current").slideUp():a.removeClass("current"))}),n.parent().addClass("current"),n.siblings("ul").slideDown(function(){(o(n)||l(n)||$t(t))&&n.parent("li").addClass("selected-item")}),t=n))}),$(".sphinxsidebarwrapper > ul ul a.reference").prepend(function(t){var e=$('<span class="expand-icon"></span>');return o($(this))||e.addClass("docs-expand-arrow"),e})}}),Bt={charts:.12158,guides:.02644,stitch:.03162,"docs-ruby":.47984,ecosystem:.00997,"docs-php-library":.04165,atlas:.01176,compass:.01684,manual:22e-5,landing:.00806,mongoid:.07576,"mms-cloud":.06358,"mms-onprem":.0179,"bi-connector":.03912,"spark-connector":.05562};function At(){!function(t,e,n,a,r){if(!t[r]){for(var i=t[r]=[],o=0;o<n.length;o++){var s=n[o];i[s]=i[s]||function(t){return function(){var e=Array.prototype.slice.call(arguments);i.push([t,e])}}(s)}i.SNIPPET_VERSION="1.0.1";var l=e.createElement("script");l.type="text/javascript",l.async=!0,l.src="https://d2yyd1h5u9mauk.cloudfront.net/integrations/web/v1/library/Dk30CC86ba0nATlK/"+r+".js";var u=e.getElementsByTagName("script")[0];u.parentNode.insertBefore(l,u)}}(window,document,["survey","reset","config","init","set","get","event","identify","track","page","screen","group","alias"],0,"delighted"),function(){var t=window.analytics=window.analytics||[];if(!t.initialize)if(t.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{t.invoked=!0,t.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"],t.factory=function(e){return function(){var n=Array.prototype.slice.call(arguments);return n.unshift(e),t.push(n),t}};for(var e=0;e<t.methods.length;e++){var n=t.methods[e];t[n]=t.factory(n)}t.load=function(e,n){var a=document.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://cdn.segment.com/analytics.js/v1/"+e+"/analytics.min.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(a,r),t._loadOptions=n},t.SNIPPET_VERSION="4.1.0",t.load("aGhVvyxnPWlyP71vVl9ZjGWxAtoVGLXX")}}()}var jt=Object.freeze({initialize:At,setup:function(t){var e=document.body.getAttribute("data-project"),n=document.body.getAttribute("data-branch");try{var a=Bt[e]||.1;window.delighted.survey({minTimeOnPage:180,sampleFactor:a,properties:{project:e,branch:n}})}catch(t){console.error(t)}try{window.analytics.page({path:location.pathname,url:location.href,project:e,branch:n})}catch(t){console.error(t)}}}),Ot="guide__deploymentpill--active",qt="guide__pill",Ht="guide__deploymentpill",Rt="show-current-deployment";function Pt(t){for(var e=document.getElementsByClassName(qt),n=0;n<e.length;n+=1){e[n].getAttribute("data-tabid")===t?e[n].classList.add(Ot):e[n].classList.remove(Ot)}document.getElementsByClassName(Rt).length>0&&(document.getElementsByClassName(Rt)[0].innerHTML=t)}function Ut(t,e){var n=document.createElement("li");return n.classList.add(qt),n.classList.add(Ht),n.setAttribute("data-tabid",t),n.innerHTML=t,function(t){t.addEventListener("click",function(t){at.dispatch({isUserAction:!0,tabId:t.target.innerHTML,type:"cloud"})})}(n),Pt(t),n}at.listen(function(t){"cloud"===t.type&&Pt(t.tabId)});var Mt,Dt=Object.freeze({setup:function(){var t=document.getElementsByClassName("guide-prefs__deploy")[0];if(void 0!==t)if(0===document.getElementsByClassName("tabpanel-cloud").length&&document.getElementsByClassName("guide-prefs__deploy").length>0)document.getElementsByClassName("guide-prefs__deploy")[0].style.display="none";else{var e=rt();void 0===e.cloud&&(e.cloud="local");var n,a=document.createElement("ul");a.classList.add("guide__pills"),a.classList.add("pillstrip-declaration"),a.setAttribute("role","tablist"),a.setAttribute("data-tab-preference","cloud"),a.appendChild(Ut("cloud",e.cloud)),a.appendChild(Ut("local",e.cloud)),t.appendChild(a),Pt(e.cloud),n=e.cloud,at.dispatch({isUserAction:!0,tabId:n,type:"cloud"})}}}),Vt=(a(Mt={},"local MongoDB",{options:[{name:"authSource",type:"text"}],template:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]",templatePasswordRedactedShell:"mongodb://$[hostlist]/$[database]?$[options] --username $[username]",templateShell:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]"}),a(Mt,"local MongoDB with replica set",{options:[{name:"replicaSet",type:"text"},{name:"authSource",type:"text"},{name:"ssl",type:"pass-through",value:"true"}],template:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]",templatePasswordRedactedShell:"mongodb://$[hostlist]/$[database]?$[options] --username $[username] --password",templateShell:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]"}),a(Mt,"Atlas (Cloud) v. 3.6",{options:[],template:"mongodb+srv://$[username]:$[password]@$[hostlist]/$[database]?retryWrites=true",templatePasswordRedactedShell:"mongodb+srv://$[hostlist]/$[database] --username $[username] --password",templateShell:"mongodb+srv://$[username]:$[password]@$[hostlist]/$[database]"}),a(Mt,"Atlas (Cloud) v. 3.4",{options:[{name:"replicaSet",type:"text"},{name:"authSource",type:"text"},{name:"ssl",type:"pass-through",value:"true"}],template:"mongodb://$[username]:$[password]@$[hostlist]/$[database]?$[options]",templatePasswordRedactedShell:"mongodb://$[hostlist]/$[database]?replicaSet=$[replicaSet] --ssl --authenticationDatabase $[authSource] --username $[username] --password",templateShell:"mongodb://$[hostlist]/$[database]?replicaSet=$[replicaSet] --ssl --authenticationDatabase $[authSource] --username $[username] --password $[password]"}),Mt);function Wt(t,e){return"pass-through"===e.type?e.value:t}var Ft=/&lt;(?:(?:URISTRING(?:_(?:(?:SHELL_NOUSER)|(?:SHELL)))?)|(?:USERNAME))&gt;/g;var zt=function(){function t(n,a){e(this,t),this.root=n,this.uriWriter=a,this.elementPairs=[],this.updateHostsFromUriWriter()}return n(t,[{key:"updateHostsFromUriWriter",value:function(){this.elementPairs=[],this.root.innerText="";var t=this.uriWriter.loadState(this.uriWriter.loadCurrentState()),e=!0,n=!1,a=void 0;try{for(var r,i=(t.hostlist||[])[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;this.addHost(o)}}catch(t){n=!0,a=t}finally{try{!e&&i.return&&i.return()}finally{if(n)throw a}}this.addHost()}},{key:"addHost",value:function(t){var e=this,n=document.createElement("input");n.className="mongodb-form__input",n.placeholder="localhost:27017",n.value=t||"";var a=document.createElement("div");a.className="mongodb-form__status",n.oninput=function(){if(n.value)e.lastInput===n&&e.addHost();else if(e.lastInput!==n)return e.elementPairs=e.elementPairs.filter(function(t){return t[0]!==n}),e.root.removeChild(n),e.root.removeChild(a),void e.uriWriter.setHosts(e.hosts);try{!function(t){var e=/^\s*([^:\s]+)(?::(\d+))?\s*$/.exec(t);if(!e)throw new Error('Invalid host format: must match the format "hostname:port"');var n=parseInt(e[2],10);if(isNaN(n))throw new Error('Missing port: host must match the format "hostname:port"');if(n>65535)throw new Error("Port number is too large");e[1]}(n.value)}catch(t){return n.setCustomValidity(t.message),a.innerText=t.message,void a.classList.add("mongodb-form__status--invalid")}a.innerText="",a.classList.remove("mongodb-form__status--invalid"),n.setCustomValidity(""),e.uriWriter.setHosts(e.hosts)},this.root.appendChild(n),this.root.appendChild(a),this.elementPairs.push([n,a])}},{key:"hosts",get:function(){return this.elementPairs.map(function(t){return t[0].value.trim()}).filter(function(t){return t})}},{key:"lastInput",get:function(){return this.elementPairs[this.elementPairs.length-1][0]}}]),t}(),Qt=null,Gt=function(){function t(){e(this,t),this.uristowrite=[],this.usernamestowrite=[],this.uristowritepasswordredactedshell=[],this.uristowriteshell=[],this.urireplacestring="",this.options={},this.hostList=null,this.setupURIListeners(),this.loadTemplateEnv(),this.renderURI(),this.registerDispatch()}return n(t,[{key:"loadTemplateEnv",value:function(){void 0===this.loadState(this.loadCurrentState()).env&&("local"===this.loadCurrentState()||"undefined"===this.loadCurrentState()?this.saveState({env:"local MongoDB"},"local"):this.saveState({env:"Atlas (Cloud) v. 3.6"},"cloud"))}},{key:"loadState",value:function(t){return"cloud"===t?JSON.parse(window.localStorage.getItem("uriwriter_atlas"))||{}:JSON.parse(window.localStorage.getItem("uriwriter_local"))||{}}},{key:"saveState",value:function(t,e){"cloud"===e?window.localStorage.setItem("uriwriter_atlas",JSON.stringify(t)):window.localStorage.setItem("uriwriter_local",JSON.stringify(t))}},{key:"loadCurrentState",value:function(){return window.localStorage.getItem("uriwriter_currentstate")}},{key:"saveCurrentState",value:function(t){window.localStorage.setItem("uriwriter_currentstate",t)}},{key:"addValue",value:function(t,e){var n=this.loadState(this.loadCurrentState());"atlaspasteduri"!==t&&"env"!==t&&delete n.atlaspasteduri,n[t]=e,this.saveState(n,this.loadCurrentState())}},{key:"setupURIListeners",value:function(){!function(){for(var t=document.getElementsByTagName("pre"),e=0;e<t.length;e+=1)t[e].innerHTML=t[e].innerHTML.replace(Ft,'<span class="uristring-element">$&</span>')}();for(var t=document.getElementsByClassName("uristring-element"),e=0;e<t.length;e+=1)t[e].innerHTML.indexOf("&lt;URISTRING&gt;")>-1&&this.uristowrite.push(t[e]),t[e].innerHTML.indexOf("&lt;USERNAME&gt;")>-1&&this.usernamestowrite.push(t[e]),t[e].innerHTML.indexOf("&lt;URISTRING_SHELL&gt;")>-1&&this.uristowriteshell.push(t[e]),t[e].innerHTML.indexOf("&lt;URISTRING_SHELL_NOUSER&gt;")>-1&&this.uristowritepasswordredactedshell.push(t[e])}},{key:"writeToPlaceholders",value:function(){for(var t=0;t<this.uristowrite.length;t+=1){var e="'"===(n=this.uristowrite[t].innerHTML).charAt(0)||'"'===n.charAt(0)?n.charAt(0):"";this.uristowrite[t].innerHTML=""+e+this.urireplacestring+e}for(var n,a=0;a<this.uristowritepasswordredactedshell.length;a+=1)this.uristowritepasswordredactedshell[a].innerHTML=this.urireplacestringPasswordRedactedShell;for(var r=0;r<this.uristowriteshell.length;r+=1)this.uristowriteshell[r].innerHTML=this.urireplacestringShell;for(var i=0;i<this.usernamestowrite.length;i+=1)this.usernamestowrite[i].innerHTML=this.username}},{key:"setEnvironment",value:function(t){var e=t.startsWith("Atlas (Cloud)");e?this.saveCurrentState("cloud"):this.saveCurrentState("local");var n=this.loadState(this.loadCurrentState()),a=Boolean(document.getElementById("uriwriter"));if(e&&a&&(document.getElementsByClassName("atlascontrols__status")[0].style.display="none",void 0!==n.atlaspasteduri))return this.parseIncomingAtlasString(n.atlaspasteduri),this.renderURI(),void this.populateForm();(void 0!==n&&void 0!==n.env&&n.env.startsWith("Atlas (Cloud)")||e)&&a&&this.hostList.updateHostsFromUriWriter(),this.addValue("env",t),this.renderURI(),a&&this.populateForm()}},{key:"toggleEnvironmentExternal",value:function(t){var e=document.getElementById("deployment_type");e.style.display="cloud"===t?"none":"block"}},{key:"setupEnvironmentListeners",value:function(){var t=this,e=document.getElementsByClassName("uriwriter__toggle"),n=this.loadState(this.loadCurrentState()).env;"Atlas (Cloud) v. 3.6"!==n&&"Atlas (Cloud) v. 3.4"!==n||(n="Atlas (Cloud)");for(var a=0;a<e.length;a+=1)n===e[a].innerHTML&&e[a].classList.add("guide__pill--active"),e[a].onclick=function(e){for(var n=e.target,a=n.parentElement.children,r=0;r<a.length;r+=1)a[r].classList.remove("guide__pill--active");n.classList.add("guide__pill--active"),t.setEnvironment(n.innerHTML)}}},{key:"renderURI",value:function(){"Atlas (Cloud)"===this.loadState(this.loadCurrentState()).env&&this.addValue("env","Atlas (Cloud) v. 3.6");var t=Vt[this.loadState(this.loadCurrentState()).env];t&&(this.uristring=t.template,this.options=t.options,this.urireplacestring=this.replaceString(this.uristring,"&"),this.urireplacestringShell=this.replaceString(t.templateShell,","),this.urireplacestringPasswordRedactedShell=this.replaceString(t.templatePasswordRedactedShell,","),this.username=this.loadState(this.loadCurrentState()).username,this.writeToPlaceholders())}},{key:"optionStringifier",value:function(t,e){for(var n=[],a=this.loadState(this.loadCurrentState()),r=0;r<this.options.length;r+=1){var i=this.options[r],o=i.name,s=Wt(a[o],i);s||(s=i.placeholder?i.placeholder:"$["+o+"]"),n.push(o+"="+s)}return n.join(e)}},{key:"replaceString",value:function(t,e){var n=this.loadState(this.loadCurrentState());n.username&&(t=t.replace("$[username]",n.username)),n.database&&(t=t.replace("$[database]",n.database)),n.authSource&&(t=t.replace("$[authSource]",n.authSource)),n.replicaSet&&(t=t.replace("$[replicaSet]",n.replicaSet));var a=this.optionStringifier(this.options,e);return a.length>0&&(t=t.replace("$[options]",a)),n.hostlist&&n.hostlist.length>0&&(t=t.replace("$[hostlist]",n.hostlist.join(","))),t}},{key:"renderOptions",value:function(){for(var t=document.getElementsByClassName("uriwriter__option-prompt");t.length>0;)t[0].parentElement.removeChild(t[0]);if(this.options&&this.options.length>0)for(var e=0;e<this.options.length;e+=1)"pass-through"!==this.options[e].type&&this.renderOption(this.options[e])}},{key:"renderOption",value:function(t){var e=this,n=document.createElement("label");n.className="mongodb-form__prompt uriwriter__option-prompt";var a=document.createElement("div");a.className="mongodb-form__label",a.innerText=t.name;var r=document.createElement("input");r.setAttribute("id",t.name),t.placeholder&&r.setAttribute("placeholder",t.placeholder),r.className="mongodb-form__input",void 0!==this.loadState(this.loadCurrentState())[t.name]&&(r.value=this.loadState(this.loadCurrentState())[t.name]),r.addEventListener("input",function(n){e.addValue(t.name,document.getElementById(t.name).value),e.renderURI()}),n.appendChild(a),n.appendChild(r);var i=document.querySelector("[data-server-configuration]");i.parentElement.insertBefore(n,i)}},{key:"initializeWidget",value:function(){var t=this;if(document.getElementById("uriwriter")){this.hostList=new zt(document.getElementById("hostlist"),this),document.getElementById("uriwriter_username").addEventListener("input",function(e){t.addValue("username",e.target.value),t.renderURI()});var e=document.getElementById("uriwriter_atlaspaste"),n=document.getElementsByClassName("atlascontrols__status")[0];e.oninput=function(a){var r=e.value;if(!r.trim())return n.style.display="none",void e.setCustomValidity("");t.parseIncomingAtlasString(r)?(e.setCustomValidity(""),t.addValue("atlaspasteduri",r),function(t){t.classList.add("mongodb-form__status--good"),t.classList.remove("mongodb-form__status--invalid"),t.style.display="",t.innerText="Connection string parsed"}(n),t.renderURI(),t.populateForm()):(e.setCustomValidity("Failed to parse"),function(t){t.classList.add("mongodb-form__status--invalid"),t.classList.remove("mongodb-form__status--good"),t.style.display="",t.innerText="Connection string could not be parsed"}(n))},document.getElementById("uriwriter_db").addEventListener("input",function(e){t.addValue("database",document.getElementById("uriwriter_db").value),t.renderURI()}),this.setupEnvironmentListeners(),this.populateForm()}}},{key:"renderFormValues",value:function(){var t=this.loadState(this.loadCurrentState()),e=document.getElementsByClassName("uriwriter__atlascontrols")[0];if("local MongoDB"!==t.env&&"local MongoDB with replica set"!==t.env)return document.getElementById("uriwriter_atlaspaste").value=t.atlaspasteduri||"",void 0!==t.atlaspasteduri?e.style.display="":e.style.display="none",document.getElementById("userinfo_form").style.display="none",void(e.style.display="");e.style.display="none",document.getElementById("userinfo_form").style.display="",void 0!==t.username&&(document.getElementById("uriwriter_username").value=t.username),void 0!==t.database&&(document.getElementById("uriwriter_db").value=t.database)}},{key:"setHosts",value:function(t){var e=this.loadState(this.loadCurrentState());e.hostlist=t,this.saveState(e,this.loadCurrentState()),this.renderURI()}},{key:"populateForm",value:function(){this.toggleEnvironmentExternal(this.loadCurrentState()),this.renderOptions(),this.renderFormValues(),this.hostList=new zt(document.getElementById("hostlist"),this)}},{key:"registerDispatch",value:function(){var t=this;at.listen(function(e){if(Qt&&(t.renderURI(),"cloud"===e.type)){if("cloud"===e.tabId){if("cloud"===t.loadCurrentState())return;t.saveCurrentState("cloud"),t.loadTemplateEnv(),t.renderURI()}else{if("local"===t.loadCurrentState())return;t.saveCurrentState("local"),t.loadTemplateEnv(),t.renderURI()}Boolean(document.getElementById("uriwriter"))&&t.populateForm()}})}},{key:"parseOutShellParams",value:function(t,e){for(var n=0;n<t.length;n+=1)if(t[n].startsWith("--")&&!t[n+1].startsWith("--")){var a=t[n].replace("--",""),r=t[n+1];"authenticationDatabase"===a&&(a="authSource"),r.startsWith("--")||(r=r.replace("<","").replace(">",""),e[a]=r)}}},{key:"parseOutURIParams",value:function(t,e){for(var n=t.split("&"),a=0;a<n.length;a+=1){var r=n[a].split("=");e[r[0]]=r[1]}}},{key:"parseOutEnvAndClusters",value:function(t,e){var n=/(\w+):\/\/((\S+)(:)+(\S+))\/(\w+)?\?(\S+)/;t.startsWith("mongodb+srv")&&(n=/((\w+)\+(\w+)):\/\/((\S+))\/(\w+)/);var a=t.match(n);if("mongodb"===a[1]){e.env="Atlas (Cloud) v. 3.4";var r=a[2];e.hostlist=r.split(","),this.parseOutURIParams(a[7],e)}else e.env="Atlas (Cloud) v. 3.6",e.hostlist=[a[4]];e.database=a[6]}},{key:"parseShell",value:function(t,e){var n=t.split(" "),a=n[1];return a=a.replace(/"/g,""),this.parseOutShellParams(n,e),this.parseOutEnvAndClusters(a,e),this.saveState(e,"cloud"),!0}},{key:"parseIncomingAtlasString",value:function(t){if(void 0===t)return!1;if(null!==(t=t.replace(/[\n\r]+/g,"").trim())){var e=this.parseAtlasString(t);return this.hostList.updateHostsFromUriWriter(),e}return!1}},{key:"parseTo3dot4",value:function(t,e){e.env="Atlas (Cloud) v. 3.4",this.saveState(e,"cloud"),e=this.loadState(this.loadCurrentState());var n=t.match(/(\S+):\/\/(\S+):(\S*)@(\S+)\/(\S+)\?(\S+)/);return!!n&&(e.username=n[2],e.hostlist=n[4].split(","),e.database=n[5],function(t,e){var n=e.split("&");if(n.length>0)for(var a=0;a<n.length;a+=1){var r=n[a].split("=");t[r[0]]=r[1]}}(e,n[6]),this.saveState(e,this.loadCurrentState()),!0)}},{key:"parseTo3dot6",value:function(t,e){e.env="Atlas (Cloud) v. 3.6",this.saveState(e,"cloud"),e=this.loadState(this.loadCurrentState());var n=t.match(/(\S+):\/\/(\S+):(\S*)@(\S+)\/([^\s?]+)\?/);return!!n&&(e.username=n[2],e.havePassword=Boolean(n[3]),e.hostlist=[n[4]],e.database=n[5],this.saveState(e,this.loadCurrentState()),!0)}},{key:"parseAtlasString",value:function(t){var e=this.loadState("true");return t.indexOf(" --")>-1?this.parseShell(t,e):t.startsWith("mongodb+srv")?this.parseTo3dot6(t,e):this.parseTo3dot4(t,e)}}]),t}();var Jt=Object.freeze({setup:function(){(Qt=new Gt).initializeWidget()}});var Xt=Object.freeze({setup:function(){$(".version-selector").on("click",function(t){t.preventDefault();var e=$(t.currentTarget).data("path");window.location.href=function(t){var e=document.getElementsByClassName("body")[0].getAttribute("data-pagename");return"index"===e?e="":e&&(e+="/"),"/"+t+"/"+e}(e)})}}),Kt=new(function(){function t(){e(this,t),this.components=[]}return n(t,[{key:"register",value:function(t){this.components.push(t),t.init&&t.init()}},{key:"update",value:function(){var t=!0,e=!1,n=void 0;try{for(var a,r=this.components[Symbol.iterator]();!(t=(a=r.next()).done);t=!0){a.value.setup(this)}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}}}]),t}());$(function(){jQuery.fn.load=function(t){$(window).on("load",t)},At(),Kt.register(v),Kt.register(w),Kt.register(S),Kt.register(nt),Kt.register(St),Kt.register(Tt),Kt.register(Lt),Kt.register(lt),Kt.register(Xt),Kt.register(jt),Kt.register(pt),Kt.register(xt),Kt.register(Jt),Kt.register(Dt),Kt.register(f),Kt.register(p),$(".toc > ul > li > ul > li").length||$(".right-column .toc").hide(),$(".expand-toc-icon").on("click",function(t){t.preventDefault(),$(".sidebar").toggleClass("reveal")});var t=$(window),e=$(".sidebar"),n=t.width()<=1093;function a(){location.hash&&document.getElementById(location.hash.substr(1))&&$(window).scrollTop(window.scrollY-75)}if(t.resize(function(a){n&&t.width()>1093?(n=!1,e.removeClass("reveal")):!n&&t.width()<=1093&&(n=!0)}),window.addEventListener("hashchange",a),location.hash&&window.setTimeout(a,10),$(".content").on("click","a",function(t){$(t.currentTarget).attr("href")===location.hash&&window.setTimeout(a,10)}),Kt.update(),document.querySelector){var r=document.querySelector("a.current");r&&r.scrollIntoView(!1)}})}();
//# sourceMappingURL=controller.js.map
